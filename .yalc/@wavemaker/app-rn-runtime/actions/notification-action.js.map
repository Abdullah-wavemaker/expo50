{"version":3,"names":["BaseAction","DEFAULT_DURATION","NotificationAction","constructor","config","_defineProperty","showDialog","prepareToastOptions","_options$class","_params$class","options","arguments","length","undefined","params","paramProvider","o","text","message","type","class","toLowerCase","onClose","onClick","onOk","content","partialContent","hideOnClick","toasterPosition","position","placement","split","styles","top","bottom","duration","parseInt","name","getMessage","invoke","success","error","operation","toasterService","showToast","onCancel"],"sources":["notification-action.ts"],"sourcesContent":["import { ActionConfig, BaseAction } from \"./base-action\";\nimport { ToastOptions, ToastService } from '@wavemaker/app-rn-runtime/core/toast.service';\nimport React from 'react';\nexport interface NotificationActionConfig extends ActionConfig {\n    showDialog: Function;\n    onOk: any;\n    onCancel: any;\n    onClose: any;\n    operation: string;\n    partialContent: React.ReactNode;\n    toasterService: () => ToastService;\n}\nconst DEFAULT_DURATION = 3000;\nexport class NotificationAction extends BaseAction<NotificationActionConfig> {\n    showDialog: Function;\n    constructor(config: NotificationActionConfig) {\n        super(config);\n        this.showDialog = config.showDialog;\n    }\n\n    prepareToastOptions(options: any = {}) {\n        const params = this.config.paramProvider();\n        const o = {} as ToastOptions;\n        o.text = options.message || params.text;\n        o.type = options.class?.toLowerCase() || params.class?.toLowerCase();\n        o.onClose = () => {\n            this.config.onClose && this.config.onClose(this);\n        },\n        o.onClick = () => {\n            this.config.onOk && this.config.onOk(this);\n        },\n        o.content = this.config.partialContent;\n        o.hideOnClick = options.hideOnClick || true;\n        const toasterPosition = options.position || params.toasterPosition || 'bottom right';\n        const placement = toasterPosition.split(' ')[0];\n        switch(placement) {\n            case 'top':\n                o.styles = {top: 0};\n                break;\n            case 'bottom':\n                o.styles = {bottom: 0};\n                break;\n            case 'center':\n                o.styles = {top: '50%'};\n                break;\n        }\n        if (this.config.partialContent) {\n            if (!o.styles) {\n                o.styles = {};\n            }\n        }\n        if (!params.duration) {\n          params.duration = (params.duration !== 0 && o.type === 'success') ? DEFAULT_DURATION : 0;\n        }\n        o.duration = parseInt(options.duration || params.duration);\n        o.name = this.name;\n        return o;\n      }\n\n    getMessage() {\n        return this.config.paramProvider().text;\n    }\n\n    invoke(options: any, success: any, error: any) {\n        super.invoke(options, success, error);\n        if (this.config.operation === 'toast') {\n            const toasterService = this.config.toasterService();\n            return toasterService.showToast(this.prepareToastOptions(options));\n        } else {\n            return this.showDialog && this.showDialog({...this.params, onOk: this.config.onOk, onCancel: this.config.onCancel, onClose: this.config.onClose});\n        }\n    }\n}\n"],"mappings":";;;AAAA,SAAuBA,UAAU,QAAQ,eAAe;AAYxD,MAAMC,gBAAgB,GAAG,IAAI;AAC7B,OAAO,MAAMC,kBAAkB,SAASF,UAAU,CAA2B;EAEzEG,WAAWA,CAACC,MAAgC,EAAE;IAC1C,KAAK,CAACA,MAAM,CAAC;IAACC,eAAA;IACd,IAAI,CAACC,UAAU,GAAGF,MAAM,CAACE,UAAU;EACvC;EAEAC,mBAAmBA,CAAA,EAAoB;IAAA,IAAAC,cAAA,EAAAC,aAAA;IAAA,IAAnBC,OAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IACjC,MAAMG,MAAM,GAAG,IAAI,CAACV,MAAM,CAACW,aAAa,CAAC,CAAC;IAC1C,MAAMC,CAAC,GAAG,CAAC,CAAiB;IAC5BA,CAAC,CAACC,IAAI,GAAGP,OAAO,CAACQ,OAAO,IAAIJ,MAAM,CAACG,IAAI;IACvCD,CAAC,CAACG,IAAI,GAAG,EAAAX,cAAA,GAAAE,OAAO,CAACU,KAAK,cAAAZ,cAAA,uBAAbA,cAAA,CAAea,WAAW,CAAC,CAAC,OAAAZ,aAAA,GAAIK,MAAM,CAACM,KAAK,cAAAX,aAAA,uBAAZA,aAAA,CAAcY,WAAW,CAAC,CAAC;IACpEL,CAAC,CAACM,OAAO,GAAG,MAAM;MACd,IAAI,CAAClB,MAAM,CAACkB,OAAO,IAAI,IAAI,CAAClB,MAAM,CAACkB,OAAO,CAAC,IAAI,CAAC;IACpD,CAAC,EACDN,CAAC,CAACO,OAAO,GAAG,MAAM;MACd,IAAI,CAACnB,MAAM,CAACoB,IAAI,IAAI,IAAI,CAACpB,MAAM,CAACoB,IAAI,CAAC,IAAI,CAAC;IAC9C,CAAC,EACDR,CAAC,CAACS,OAAO,GAAG,IAAI,CAACrB,MAAM,CAACsB,cAAc;IACtCV,CAAC,CAACW,WAAW,GAAGjB,OAAO,CAACiB,WAAW,IAAI,IAAI;IAC3C,MAAMC,eAAe,GAAGlB,OAAO,CAACmB,QAAQ,IAAIf,MAAM,CAACc,eAAe,IAAI,cAAc;IACpF,MAAME,SAAS,GAAGF,eAAe,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC/C,QAAOD,SAAS;MACZ,KAAK,KAAK;QACNd,CAAC,CAACgB,MAAM,GAAG;UAACC,GAAG,EAAE;QAAC,CAAC;QACnB;MACJ,KAAK,QAAQ;QACTjB,CAAC,CAACgB,MAAM,GAAG;UAACE,MAAM,EAAE;QAAC,CAAC;QACtB;MACJ,KAAK,QAAQ;QACTlB,CAAC,CAACgB,MAAM,GAAG;UAACC,GAAG,EAAE;QAAK,CAAC;QACvB;IACR;IACA,IAAI,IAAI,CAAC7B,MAAM,CAACsB,cAAc,EAAE;MAC5B,IAAI,CAACV,CAAC,CAACgB,MAAM,EAAE;QACXhB,CAAC,CAACgB,MAAM,GAAG,CAAC,CAAC;MACjB;IACJ;IACA,IAAI,CAAClB,MAAM,CAACqB,QAAQ,EAAE;MACpBrB,MAAM,CAACqB,QAAQ,GAAIrB,MAAM,CAACqB,QAAQ,KAAK,CAAC,IAAInB,CAAC,CAACG,IAAI,KAAK,SAAS,GAAIlB,gBAAgB,GAAG,CAAC;IAC1F;IACAe,CAAC,CAACmB,QAAQ,GAAGC,QAAQ,CAAC1B,OAAO,CAACyB,QAAQ,IAAIrB,MAAM,CAACqB,QAAQ,CAAC;IAC1DnB,CAAC,CAACqB,IAAI,GAAG,IAAI,CAACA,IAAI;IAClB,OAAOrB,CAAC;EACV;EAEFsB,UAAUA,CAAA,EAAG;IACT,OAAO,IAAI,CAAClC,MAAM,CAACW,aAAa,CAAC,CAAC,CAACE,IAAI;EAC3C;EAEAsB,MAAMA,CAAC7B,OAAY,EAAE8B,OAAY,EAAEC,KAAU,EAAE;IAC3C,KAAK,CAACF,MAAM,CAAC7B,OAAO,EAAE8B,OAAO,EAAEC,KAAK,CAAC;IACrC,IAAI,IAAI,CAACrC,MAAM,CAACsC,SAAS,KAAK,OAAO,EAAE;MACnC,MAAMC,cAAc,GAAG,IAAI,CAACvC,MAAM,CAACuC,cAAc,CAAC,CAAC;MACnD,OAAOA,cAAc,CAACC,SAAS,CAAC,IAAI,CAACrC,mBAAmB,CAACG,OAAO,CAAC,CAAC;IACtE,CAAC,MAAM;MACH,OAAO,IAAI,CAACJ,UAAU,IAAI,IAAI,CAACA,UAAU,CAAC;QAAC,GAAG,IAAI,CAACQ,MAAM;QAAEU,IAAI,EAAE,IAAI,CAACpB,MAAM,CAACoB,IAAI;QAAEqB,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ;QAAEvB,OAAO,EAAE,IAAI,CAAClB,MAAM,CAACkB;MAAO,CAAC,CAAC;IACrJ;EACJ;AACJ"}