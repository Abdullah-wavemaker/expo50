{"version":3,"names":["VariableEvents","BaseAction","merge","NavigationAction","constructor","config","invoke","params","onSuccess","onError","_params","data","paramProvider","dataSet","notify","BEFORE_INVOKE","then","_config$appConfig$cur","_this$config$_context","_params2","_this$config$_context2","_params3","_config$appConfig$cur2","operation","appConfig","currentPage","goBack","_context","Widgets","tabName","select","accordionName","expand","goToPage","pageName","SUCCESS","ERROR","AFTER_INVOKE","navigate"],"sources":["navigation-action.ts"],"sourcesContent":["import AppConfig from \"@wavemaker/app-rn-runtime/core/AppConfig\";\nimport { VariableEvents } from \"@wavemaker/app-rn-runtime/variables/base-variable\";\nimport { ActionConfig, BaseAction } from \"./base-action\";\nimport {merge} from \"lodash\";\n\nexport interface NavigationActionConfig extends ActionConfig {\n    appConfig: AppConfig;\n    operation: string;\n    _context: any;\n}\n\nexport class NavigationAction extends BaseAction<NavigationActionConfig> {\n    constructor(config: NavigationActionConfig) {\n        super(config);\n    }\n\n    public invoke(params?: {}, onSuccess?: Function, onError?: Function): Promise<NavigationAction> {\n        const config = this.config;\n        // @ts-ignore\n        params = params?.data ? merge(this.config.paramProvider(), params.data) : merge(this.config.paramProvider(), this.dataSet);\n        this.notify(VariableEvents.BEFORE_INVOKE, [this, this.dataSet]);\n        return super.invoke(params, onSuccess, onError).then(() => {\n            switch(config.operation) {\n                case 'goToPreviousPage':\n                    config.appConfig.currentPage?.goBack();\n                    break;\n                case 'gotoTab':\n                    this.config._context?.Widgets[(params as any)?.tabName].select();\n                    break;\n                case 'gotoAccordion':\n                    this.config._context?.Widgets[(params as any)?.accordionName].expand();\n                    break;\n                case 'gotoPage' : \n                    config.appConfig.currentPage?.goToPage(this.params.pageName, this.params);\n            }\n        }).then(() => {\n            config.onSuccess && config.onSuccess(this, this.dataSet);\n            this.notify(VariableEvents.SUCCESS, [this, this.dataSet]);\n        }, () => {\n            config.onError && config.onError(this, null);\n            this.notify(VariableEvents.ERROR, [this, this.dataSet]);\n        }).then(() => {\n            this.notify(VariableEvents.AFTER_INVOKE, [this, this.dataSet]);\n            return this;\n        });\n    }\n\n    public navigate(params?: {}, onSuccess?: Function, onError?: Function): Promise<NavigationAction> {\n        return this.invoke(params, onSuccess, onError);\n    }\n}\n"],"mappings":"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"}