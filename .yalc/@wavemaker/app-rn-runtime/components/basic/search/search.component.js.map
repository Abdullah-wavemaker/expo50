{"version":3,"names":["React","Keyboard","Platform","ScrollView","Text","TextInput","View","find","isNull","WmSearchProps","DEFAULT_CLASS","ModalConsumer","DataProvider","AccessibilityWidgetType","getAccessibilityProps","BaseDatasetComponent","BaseDatasetState","WmAnchor","WmPicture","Tappable","WmButton","get","isArray","isEmpty","isObject","AssetProvider","WmSearchState","constructor","arguments","_defineProperty","top","left","WmSearch","props","_this","this","Promise","resolve","position","view","measure","x","length","undefined","y","width","height","px","py","updateState","computePosition","then","isOpened","dataProvider","datavalue","query","clearSearch","invokeEventCallback","hide","dataItems","state","map","item","selected","type","updateFilteredData","_filteredData","queryText","filterOptions","entries","filteredData","minchars","_this$dataProvider","searchkey","updateRequired","init","invokeVariable","response","dataSet","setDataItems","filter","result","dataObject","data","isFocused","showPopover","focus","_this$widgetRef","widgetRef","onChange","value","isDefaultQuery","prevQuery","searchon","validate","invokeEvent","proxy","invokeChange","e","OS","cursor","target","selectionStart","onFocus","disabled","_this$state$props$que","onBlur","setTimeout","triggerValidation","prepareModalOptions","content","styles","modalService","o","modalOptions","modalContentSTyles","searchInputWidth","modalContent","borderWidth","modalStyle","modal","contentStyle","isModal","onClose","dismiss","setState","hideModal","searchIconPress","onItemSelect","displayexp","displayfield","datafield","updateDatavalue","prevDatavalue","queryModel","renderSearchBar","_this$state$dataItems","opts","valueExpr","createElement","style","root","ref","onLayout","searchInputWrapper","_extends","text","isValid","invalid","focusedText","selectionEnd","getTestPropsForInput","SEARCH","placeholderTextColor","placeholderText","color","placeholder","autoFocus","autofocus","editable","readonly","onChangeText","bind","nativeEvent","layout","showclear","onTap","id","getTestId","clearButton","iconclass","showSearchIcon","searchButton","reset","renderSearchItem","index","imageStyles","imagewidth","getTestProps","searchItem","template","renderitempartial","Fragment","name","picturesource","imgSrc","getTestPropsForLabel","searchItemText","updateDefaultQueryModel","selectedItem","onDataItemsUpdate","componentDidMount","onPropertyChange","$new","$old","dataset","setTemplate","partialName","renderWidget","showModal","maxHeight","contentContainerStyle","dropDownContent","loadAsset","key","limit","caption","datacompletemsg","dataCompleteItem"],"sources":["search.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Keyboard, Platform, ScrollView, Text, TextInput, View } from 'react-native';\nimport { find, isNull } from 'lodash';\n\nimport WmSearchProps from './search.props';\nimport { DEFAULT_CLASS, WmSearchStyles } from './search.styles';\nimport { ModalConsumer, ModalOptions, ModalService} from \"@wavemaker/app-rn-runtime/core/modal.service\";\nimport { DataProvider } from '@wavemaker/app-rn-runtime/components/basic/search/local-data-provider';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \n\nimport {\n  BaseDatasetComponent,\n  BaseDatasetState\n} from '@wavemaker/app-rn-runtime/components/input/basedataset/basedataset.component';\nimport WmAnchor from '@wavemaker/app-rn-runtime/components/basic/anchor/anchor.component';\nimport WmPicture from '@wavemaker/app-rn-runtime/components/basic/picture/picture.component';\nimport { Tappable } from '@wavemaker/app-rn-runtime/core/tappable.component';\nimport WmButton from '@wavemaker/app-rn-runtime/components/basic/button/button.component';\nimport { get, isArray, isEmpty, isObject } from \"lodash-es\";\nimport { AssetProvider } from '@wavemaker/app-rn-runtime/core/asset.provider';\n\nexport class WmSearchState extends BaseDatasetState<WmSearchProps> {\n  isOpened: boolean = false;\n  modalOptions = {} as ModalOptions;\n  template: string = \"\";\n  position = {\n    top: 0,\n    left: 0\n  } as DropdownPosition;\n  data: any = [];\n}\n\nexport interface DropdownPosition {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n}\n\nexport default class WmSearch extends BaseDatasetComponent<WmSearchProps, WmSearchState, WmSearchStyles> {\n  view: View = null as any;\n  private prevDatavalue: any;\n  private queryModel: any;\n  private searchInputWidth: any;\n  private isDefaultQuery: boolean = true;\n  private dataProvider: DataProvider;\n  public widgetRef: TextInput | null = null;\n  private cursor: any = 0;\n  private isFocused: boolean = false;\n  private updateRequired: any;\n\n  constructor(props: WmSearchProps) {\n    super(props, DEFAULT_CLASS, new WmSearchProps(), new WmSearchState());\n    this.dataProvider = new DataProvider();\n    if (this.props.datavalue) {\n      this.updateState({\n        props: {\n          query: this.props.datavalue\n        }\n      } as WmSearchState);\n    }\n  }\n\n  computePosition = () => {\n    return new Promise<void>((resolve) => {\n      const position = {} as DropdownPosition;\n      this.view.measure((x = 0, y = 0, width = 0, height = 0, px = 0, py = 0) => {\n        position.left = px;\n        position.top = py + height;\n        this.updateState({ position: position } as WmSearchState, resolve);\n      });\n    });\n  }\n\n  clearSearch() {\n    this.invokeEventCallback('onClear', [null, this]);\n    this.hide();\n    this.updateState({\n      props: {\n        query: ''\n      },\n      dataItems: this.state.dataItems ? this.state.dataItems.map((item: any) => {\n        item.selected = false;\n        return item;\n      }) : []\n    } as WmSearchState, () => {\n      if (this.state.props.type === 'autocomplete') {\n        this.updateFilteredData('');\n      }\n    });\n  }\n\n  updateFilteredData(queryText: string = '') {\n    const props = this.state.props;\n    const filterOptions = {\n      query: queryText,\n      props: props,\n      entries: this.state.dataItems\n    };\n    let filteredData: Array<any> = [];\n    if (props.minchars && queryText.length < props.minchars) {\n      filteredData = [];\n    } else if (props.type === 'search' && !queryText) {\n      filteredData = [];\n    } else {\n      if (this.props.searchkey && this.updateRequired === undefined) {\n        this.updateRequired = this.dataProvider.init(this);\n      }\n      // for service variables invoke the variable with params.\n      if (this.props.searchkey && this.updateRequired && this.state.props.query !== queryText) {\n        this.dataProvider.invokeVariable(this, queryText).then((response: any) => {\n          if (response) {\n            response = response.dataSet;\n            if (isEmpty(response)) {\n              filteredData = [];\n            } else {\n              if (isObject(response) && !isArray(response)) {\n                response = [response];\n              }\n              this.setDataItems(response);\n            }\n          }\n        }, () => {});\n        return;\n      }\n      filteredData = this.dataProvider?.filter(filterOptions);\n    }\n    this.updateState({\n      props: { result: filteredData?.map( (item: any) => item.dataObject), query: queryText },\n      data: filteredData,\n    } as WmSearchState);\n    if (!this.state.isOpened && this.isFocused) {\n      this.showPopover && this.showPopover();\n    }\n  }\n\n  focus() {\n    this?.widgetRef?.focus();\n  }\n\n  onChange(value: any) {\n    this.isDefaultQuery = false;\n    const prevQuery = this.state.props.query;\n    if (this.state.props.searchon === 'onsearchiconclick') {\n      this.updateState({\n        props: {result: [], query: value},\n        data: []\n      } as WmSearchState);\n    } else {\n      this.updateFilteredData(value);\n    }\n    if (value === '') {\n      this.validate(value);\n      this.updateState({\n        props: {\n          datavalue: '',\n        },\n      } as WmSearchState);\n      if (value === prevQuery) {\n        return;\n      }\n    }\n    if (this.props.invokeEvent) {\n      this.props.invokeEvent('onChange', [undefined, this.proxy, value, prevQuery]);\n    }\n     this.invokeEventCallback('onChange', [ undefined, this.proxy, value, prevQuery ]);\n  }\n\n  invokeChange(e: any) {\n    if (Platform.OS === 'web') {\n      this.cursor = e.target.selectionStart;\n      this.updateState({ props: { query: e.target.value } } as WmSearchState);\n    }\n  }\n\n  onFocus() {\n    this.isFocused = true;\n    if (!this.state.props.disabled && this.state.props.type === 'autocomplete') {\n      this.cursor = this.state.props.query?.length || 0;\n      this.updateFilteredData(this.state.props.query || '');\n    }\n    this.invokeEventCallback('onFocus', [null, this]);\n  }\n\n  onBlur() {\n    this.isFocused = false;\n    this.validate(this.state.props.datavalue);\n    if (!this.state.props.datavalue) {\n      setTimeout(() => {\n        this.props.triggerValidation && this.props.triggerValidation();\n      })\n    }\n    this.invokeEventCallback('onBlur', [null, this]);\n  }\n\n  public showPopover = () => {\n    this.computePosition().then(() => {\n      this.updateState({ isOpened: true } as WmSearchState);\n    });\n  };\n\n  public hide = () => {};\n\n  prepareModalOptions(content: React.ReactNode, styles: WmSearchStyles, modalService: ModalService) {\n    const o = this.state.modalOptions;\n    const modalContentSTyles = {\n      width: this.searchInputWidth - 2 * (styles.modalContent.borderWidth || 0),\n      left: (this.state.position.left || 0) + 2 * (styles.modalContent.borderWidth || 0) };\n    o.modalStyle = {...styles.modal};\n    o.contentStyle = {...styles.modalContent, ...this.state.position, ...modalContentSTyles};\n    o.content = content;\n    o.isModal = true;\n    o.onClose = () => {\n      this.hide = () => {};\n      Keyboard.dismiss();\n      if (this.state.isOpened) {\n        this.setState({isOpened: false, modalOptions: {} as ModalOptions} as WmSearchState);\n      }\n    };\n    this.hide = () => {\n      modalService.hideModal(this.state.modalOptions);\n      if (this.state.isOpened) {\n        this.setState({ isOpened: false, modalOptions: {} as ModalOptions } as WmSearchState);\n      }\n    }\n    return o;\n  }\n\n  searchIconPress() {\n    this.isFocused = false;\n    if (this.state.props.searchon === 'onsearchiconclick') {\n      this.updateFilteredData(this.state.props.query);\n    } else {\n      this.onItemSelect(this.state.data[0]);\n    }\n  }\n\n  onItemSelect(item: any) {\n    this.isFocused = false;\n    this.updateState({ props: {\n        query: item.displayexp || item.displayfield\n      }\n    } as WmSearchState);\n    this.validate(item.datafield);\n    this.updateDatavalue(item.datafield);\n    this.prevDatavalue = item.datafield;\n    this.queryModel = item;\n    if (get(this.props, 'formfield')) {\n      // @ts-ignore\n      this.props.invokeEvent('onSelect', [null, this, item.datafield]);\n      // @ts-ignore\n      this.props.invokeEvent('onSubmit', [null, this]);\n    } else {\n      this.invokeEventCallback('onSelect', [null, this, item.datafield]);\n      this.invokeEventCallback('onSubmit', [null, this]);\n    }\n    this.hide();\n  }\n\n  renderSearchBar() {\n    const props = this.state.props;\n    let opts: any = {};\n    const valueExpr = Platform.OS === 'web' ? 'value' : 'defaultValue';\n    opts[valueExpr] = this.state.props.query || '';\n    return(\n      /*\n       * onLayout function is required.\n       * https://github.com/naoufal/react-native-accordion/pull/19/files\n       */\n      <View style={this.styles.root} ref={ref => {this.view = ref as View}} onLayout={() => {}}>\n        <View style={this.styles.searchInputWrapper}>\n          <TextInput style={[this.styles.text, this.state.isValid ? {} : this.styles.invalid, this.state.isOpened && this.state.dataItems?.length > 0? this.styles.focusedText : null]}\n           ref={ref => {this.widgetRef = ref;\n             // @ts-ignore\n             if (ref && !isNull(ref.selectionStart) && !isNull(ref.selectionEnd)) {\n               // @ts-ignore\n               ref.selectionStart = ref.selectionEnd = this.cursor;\n             }}}\n            {...this.getTestPropsForInput()}\n            {...getAccessibilityProps(AccessibilityWidgetType.SEARCH, props)}\n            placeholderTextColor={this.styles.placeholderText.color as any}\n            placeholder={props.placeholder || 'Search'}\n            autoFocus={props.autofocus}\n            editable={props.disabled || props.readonly ? false : true}\n            onChangeText={this.onChange.bind(this)}\n            onChange={this.invokeChange.bind(this)}\n            onFocus={this.onFocus.bind(this)}\n            onLayout={e => {this.searchInputWidth = e.nativeEvent.layout.width}}\n            onBlur={this.onBlur.bind(this)}\n            {...opts}>\n         </TextInput>\n         {props.showclear && this.state.props.query ? <WmButton onTap={this.clearSearch.bind(this)}\n                   id={this.getTestId('clear')}\n                   styles={this.styles.clearButton} iconclass={'wi wi-clear'}></WmButton> : null}\n       </View>\n        {props.showSearchIcon && props.type === 'search' ? <WmButton styles={this.styles.searchButton}\n                  id={this.getTestId('search')}\n                  iconclass={'wm-sl-l sl-search'} onTap={this.searchIconPress.bind(this)}></WmButton> : null}\n      </View>\n    );\n  }\n\n  reset() {\n    if (this.state.props.query) {\n      this.updateState({\n        props: {\n          query: ''\n        }\n      } as WmSearchState);\n    }\n  }\n\n  renderSearchItem(item: any, index: number) {\n    const props = this.state.props;\n    const imageStyles = { root: {height:props.imagewidth, width:props.imagewidth}}\n    return (\n      <Tappable onTap={this.onItemSelect.bind(this, item)} {...this.getTestProps(`action${index}`)}>\n        <View  style={this.styles.searchItem}>\n          {!isEmpty(this.state.template) && this.props.renderitempartial ?\n           this.props.renderitempartial(item.dataObject, index, this.state.template) : (<>\n          <WmPicture id={this.getTestId(`picture${index}`)} styles={imageStyles} name={props.name + '_image'}  picturesource={item.imgSrc}></WmPicture>\n          <Text {...this.getTestPropsForLabel(index + '')} style={this.styles.searchItemText}>{item.displayexp || item.displayfield}</Text>\n          </>)}\n        </View>\n      </Tappable>\n    );\n  }\n\n  updateDefaultQueryModel() {\n    if (this.state.dataItems && this.state.dataItems.length && this.isDefaultQuery) {\n        const selectedItem = find(this.state.dataItems, (item) => item.selected);\n        this.updateState({ props: {\n            query: selectedItem ? (selectedItem.displayexp || selectedItem.displayfield) : ''\n          }\n        } as WmSearchState);\n    }\n  }\n\n  onDataItemsUpdate() {\n    super.onDataItemsUpdate();\n    this.isFocused && this.state.dataItems.length && this.updateFilteredData(this.state.props.query);\n    this.updateDefaultQueryModel();\n  }\n\n  componentDidMount(): void {\n    super.componentDidMount();\n    this.updateDefaultQueryModel();\n  }\n\n  onPropertyChange(name: string, $new: any, $old: any) {\n    switch (name) {\n      case 'dataset':\n        if (!isEmpty($new) && isObject($new) && !isArray($new)) {\n          $new = [$new];\n          this.updateState({\n            props: {\n              dataset: $new\n            }\n          } as WmSearchState);\n        }\n        break;\n    }\n    super.onPropertyChange(name, $new, $old);\n  }\n\n  setTemplate(partialName: any) {\n    this.updateState({ template: partialName} as WmSearchState);\n  }\n\n  renderWidget(props: WmSearchProps) {\n    const result = this.state.data;\n    return (\n      <View>\n        {this.renderSearchBar()}\n        {this.state.isOpened ? (\n          <ModalConsumer>\n            {(modalService: ModalService) => {\n              modalService.showModal(this.prepareModalOptions((\n                <ScrollView style={{width: '100%', maxHeight: 200}} contentContainerStyle={this.styles.dropDownContent}>\n                    <AssetProvider value={this.loadAsset}>\n                    {result && result.map((item: any, index: any) => (\n                      <View key={item.key}>\n                        {\n                          (!props.limit) || (props.limit && index+1 <= props.limit) ?\n                            this.renderSearchItem(item, index)\n                            : null\n                        }\n                        {\n                          index === result.length - 1 ?\n                          <WmAnchor caption={props.datacompletemsg} styles={this.styles.dataCompleteItem}></WmAnchor> : null\n                        }\n                      </View>\n                    ))}\n                    </AssetProvider>\n                </ScrollView>\n              ), this.styles, modalService));\n              return null;\n            }}\n          </ModalConsumer>) : null}\n      </View>\n\n    );\n  }\n}\n"],"mappings":"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"}