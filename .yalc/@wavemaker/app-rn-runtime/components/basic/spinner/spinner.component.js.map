{"version":3,"names":["React","Text","View","Platform","Color","BaseComponent","BaseComponentState","WmSpinnerProps","DEFAULT_CLASS","WmIcon","WmPicture","LottieView","ThemeVariables","WmSpinnerState","WmSpinner","constructor","props","_defineProperty","obj","colors","Object","keys","forEach","key","value","ind","Math","floor","random","length","toLowerCase","includes","shape","recursiveSearch","prepareIcon","createElement","id","getTestId","styles","icon","iconclass","iconsize","prepareImage","image","picturesource","toRgbArray","color","red","green","blue","addClasstoLottie","lottiePath","primaryColor","INSTANCE","darken","json","loader","prepareLottie","_Lottie","Lottie","OS","require","default","animationData","lottie","loop","play","style","testID","source","resizeMode","autoPlay","renderWidget","root","_background","caption","_extends","getTestPropsForLabel","text"],"sources":["spinner.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, View, Platform } from 'react-native';\nimport Color from \"color\";\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\n\nimport WmSpinnerProps from './spinner.props';\nimport { DEFAULT_CLASS, WmSpinnerStyles } from './spinner.styles';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport WmPicture from '@wavemaker/app-rn-runtime/components/basic/picture/picture.component';\nimport LottieView from 'lottie-react-native';\nimport ThemeVariables from '@wavemaker/app-rn-runtime/styles/theme.variables';\n\nexport class WmSpinnerState extends BaseComponentState<WmSpinnerProps> {\n\n}\n\nexport default class WmSpinner extends BaseComponent<WmSpinnerProps, WmSpinnerState, WmSpinnerStyles> {\n\n  constructor(props: WmSpinnerProps) {\n    super(props, DEFAULT_CLASS, new WmSpinnerProps());\n  }\n\n  private prepareIcon(props: any) {\n    return (<WmIcon\n      id={this.getTestId('icon')}\n      styles={this.styles.icon}\n      iconclass={props.iconclass + ' fa-spin'} iconsize={props.iconsize}></WmIcon>);\n  }\n\n  private prepareImage(props: any) {\n    return (<WmPicture\n        id={this.getTestId('picture')}\n        styles={this.styles.image}\n        picturesource={props.image}></WmPicture>);\n  }\n\n  private recursiveSearch = (obj: any, colors: any) => {\n    obj && Object.keys(obj).forEach(key => {\n        let value = obj[key];\n        let ind = Math.floor(Math.random() * (0 - colors.length ) + colors.length);\n        if (key == \"nm\" && (value.toLowerCase().includes('fill ') || value.toLowerCase().includes('stroke '))) {\n            if (obj[\"c\"] && obj[\"c\"][\"k\"] \n              && (obj[\"c\"][\"k\"].length == 4\n                || (obj[\"c\"][\"k\"].length ==3 \n                  && typeof obj[\"c\"][\"k\"][0] == 'number'))) {\n                obj[\"c\"][\"k\"] = colors[ind];\n            }\n            else {\n                if (obj[\"c\"] && obj[\"c\"][\"k\"]){\n                    for (let shape in obj[\"c\"][\"k\"]) {\n                      if(obj[\"c\"][\"k\"][shape] && obj[\"c\"][\"k\"][shape][\"s\"]){\n                        obj[\"c\"][\"k\"][shape][\"s\"] = colors[ind];\n                      }\n                    }\n                }\n            }\n        } else if (typeof value === 'object') {\n            this.recursiveSearch(value, colors);\n        }\n      });\n      return obj;\n  };\n\n  private toRgbArray(color: Color) {\n    return [\n      color.red()/255,\n      color.green()/255,\n      color.blue()/255,\n      1\n    ]\n  }\n\n  private addClasstoLottie(lottiePath: any) {\n    let primaryColor = Color(ThemeVariables.INSTANCE.primaryColor);\n    let colors = [this.toRgbArray(primaryColor), \n      this.toRgbArray(primaryColor.darken(0.2)), \n      this.toRgbArray(primaryColor.darken(0.4)), \n      this.toRgbArray(primaryColor.darken(0.6)), \n      this.toRgbArray(primaryColor.darken(0.8))];\n    return this.recursiveSearch(lottiePath.json, lottiePath.loader == 'circleSpinner' ? [colors[0]] : colors);\n  }\n\n  private prepareLottie(props: any) {\n    let Lottie = Platform.OS == 'web' ? require('react-lottie-player') : null;\n    Lottie = Lottie?.default || Lottie;\n    return (\n      Platform.OS == 'web' ? <Lottie animationData={this.addClasstoLottie(props.lottie)} loop={true} play={true} style={this.styles.lottie} /> : <LottieView\n        testID={this.getTestId('lottie')}\n        source={this.addClasstoLottie(props.lottie)}\n        resizeMode='contain'\n        autoPlay={true}\n        loop={true}\n        style={this.styles.lottie}\n      />\n    )\n  }\n\n  renderWidget(props: WmSpinnerProps) {\n    return (\n      <View style={this.styles.root}>\n        {this._background}\n        {props.lottie ? this.prepareLottie(props) : props.image ? this.prepareImage(props) : this.prepareIcon(props)}\n        {props.caption ? <Text {...this.getTestPropsForLabel()} style={this.styles.text}>{props.caption}</Text> : null}\n      </View>\n    );\n  }\n}\n"],"mappings":"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"}