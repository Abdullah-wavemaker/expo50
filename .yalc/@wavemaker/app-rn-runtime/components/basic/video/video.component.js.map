{"version":3,"names":["React","View","ResizeMode","Video","BaseComponent","BaseComponentState","WmVideoProps","DEFAULT_CLASS","AccessibilityWidgetType","getAccessibilityProps","isFullPathUrl","WmVideoState","WmVideo","constructor","props","_defineProperty","getSource","path","resource","loadAsset","uri","componentDidMount","state","autoplay","_this$video","video","playAsync","renderWidget","createElement","style","styles","root","_background","_extends","VIDEO","ref","width","height","flex","source","mp4format","webmformat","posterSource","videoposter","useNativeControls","controls","resizeMode","CONTAIN","isLooping","loop","isMuted","muted","testID","getTestId"],"sources":["video.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, View } from 'react-native';\nimport { ResizeMode, Video } from 'expo-av';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\n\nimport WmVideoProps from './video.props';\nimport { DEFAULT_CLASS, WmVideoStyles } from './video.styles';\nimport { isString } from 'lodash-es';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \nimport { isFullPathUrl } from '@wavemaker/app-rn-runtime/core/utils';\n\nexport class WmVideoState extends BaseComponentState<WmVideoProps> {}\n\nexport default class WmVideo extends BaseComponent<WmVideoProps, WmVideoState, WmVideoStyles> {\n\n  private video: Video | null = null as any;\n\n  constructor(props: WmVideoProps) {\n    super(props, DEFAULT_CLASS, new WmVideoProps(), new WmVideoState());\n  }\n\n  getSource(path: string) {\n    if (!path) {\n      return null;\n    }\n    const resource = this.loadAsset(path);\n    if (isFullPathUrl(resource as string)) {\n      return {\n        uri: resource\n      };\n    }\n    return resource;\n  }\n\n  componentDidMount(): void {\n    if (this.state.props.autoplay) {\n      this.video?.playAsync();\n    }\n  }\n\n  renderWidget(props: WmVideoProps) {\n    return (\n      <View style={this.styles.root}>\n        {this._background}\n        <Video\n          {...getAccessibilityProps(AccessibilityWidgetType.VIDEO, props)}\n          ref={(video) => { this.video = video; }}\n          style={{ width: '100%', height: '100%', flex: 1 }}\n          source={this.getSource(\n            props.mp4format\n            || props.webmformat) as any}\n          posterSource={ this.getSource(props.videoposter) as any }\n          useNativeControls={props.controls}\n          resizeMode={ResizeMode.CONTAIN}\n          isLooping={props.loop}\n          isMuted={props.muted}\n          testID={this.getTestId('video')}\n        />\n      </View>); \n  }\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAeC,IAAI,QAAQ,cAAc;AACzC,SAASC,UAAU,EAAEC,KAAK,QAAQ,SAAS;AAC3C,SAASC,aAAa,EAAEC,kBAAkB,QAAQ,+CAA+C;AAEjG,OAAOC,YAAY,MAAM,eAAe;AACxC,SAASC,aAAa,QAAuB,gBAAgB;AAE7D,SAASC,uBAAuB,EAAEC,qBAAqB,QAAQ,8CAA8C;AAC7G,SAASC,aAAa,QAAQ,sCAAsC;AAEpE,OAAO,MAAMC,YAAY,SAASN,kBAAkB,CAAe;AAEnE,eAAe,MAAMO,OAAO,SAASR,aAAa,CAA4C;EAI5FS,WAAWA,CAACC,KAAmB,EAAE;IAC/B,KAAK,CAACA,KAAK,EAAEP,aAAa,EAAE,IAAID,YAAY,CAAC,CAAC,EAAE,IAAIK,YAAY,CAAC,CAAC,CAAC;IAACI,eAAA,gBAHxC,IAAI;EAIlC;EAEAC,SAASA,CAACC,IAAY,EAAE;IACtB,IAAI,CAACA,IAAI,EAAE;MACT,OAAO,IAAI;IACb;IACA,MAAMC,QAAQ,GAAG,IAAI,CAACC,SAAS,CAACF,IAAI,CAAC;IACrC,IAAIP,aAAa,CAACQ,QAAkB,CAAC,EAAE;MACrC,OAAO;QACLE,GAAG,EAAEF;MACP,CAAC;IACH;IACA,OAAOA,QAAQ;EACjB;EAEAG,iBAAiBA,CAAA,EAAS;IACxB,IAAI,IAAI,CAACC,KAAK,CAACR,KAAK,CAACS,QAAQ,EAAE;MAAA,IAAAC,WAAA;MAC7B,CAAAA,WAAA,OAAI,CAACC,KAAK,cAAAD,WAAA,uBAAVA,WAAA,CAAYE,SAAS,CAAC,CAAC;IACzB;EACF;EAEAC,YAAYA,CAACb,KAAmB,EAAE;IAChC,oBACEd,KAAA,CAAA4B,aAAA,CAAC3B,IAAI;MAAC4B,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC;IAAK,GAC3B,IAAI,CAACC,WAAW,eACjBhC,KAAA,CAAA4B,aAAA,CAACzB,KAAK,EAAA8B,QAAA,KACAxB,qBAAqB,CAACD,uBAAuB,CAAC0B,KAAK,EAAEpB,KAAK,CAAC;MAC/DqB,GAAG,EAAGV,KAAK,IAAK;QAAE,IAAI,CAACA,KAAK,GAAGA,KAAK;MAAE,CAAE;MACxCI,KAAK,EAAE;QAAEO,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAE,CAAE;MAClDC,MAAM,EAAE,IAAI,CAACvB,SAAS,CACpBF,KAAK,CAAC0B,SAAS,IACZ1B,KAAK,CAAC2B,UAAU,CAAS;MAC9BC,YAAY,EAAG,IAAI,CAAC1B,SAAS,CAACF,KAAK,CAAC6B,WAAW,CAAU;MACzDC,iBAAiB,EAAE9B,KAAK,CAAC+B,QAAS;MAClCC,UAAU,EAAE5C,UAAU,CAAC6C,OAAQ;MAC/BC,SAAS,EAAElC,KAAK,CAACmC,IAAK;MACtBC,OAAO,EAAEpC,KAAK,CAACqC,KAAM;MACrBC,MAAM,EAAE,IAAI,CAACC,SAAS,CAAC,OAAO;IAAE,EACjC,CACG,CAAC;EACX;AACF"}