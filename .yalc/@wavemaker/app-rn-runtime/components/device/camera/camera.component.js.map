{"version":3,"names":["React","View","BaseComponent","BaseComponentState","WmCameraProps","DEFAULT_CLASS","WmButton","CameraConsumer","WmCameraState","WmCamera","constructor","props","_defineProperty","onCameraTap","state","capturetype","params","allowImageEdit","allowedit","imageQuality","imagequality","imageEncodingType","imageencodingtype","imageTargetWidth","imagetargetwidth","imageTargetHeight","imagetargetheight","camera","captureImage","then","res","updateModel","imagePath","content","captureVideo","videoPath","$event","value","startsWith","localFile","updateState","datavalue","localFilePath","invokeEventCallback","bind","proxy","renderWidget","createElement","cameraService","_background","style","styles","root","id","getTestId","iconclass","button","iconsize","onTap","accessibilitylabel","hint","accessibilityrole"],"sources":["camera.component.tsx"],"sourcesContent":["import React from 'react';\nimport { View } from 'react-native';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\n\nimport WmCameraProps from './camera.props';\nimport { DEFAULT_CLASS, WmCameraStyles } from './camera.styles';\nimport WmButton from '@wavemaker/app-rn-runtime/components/basic/button/button.component';\nimport { CaptureImageOutput } from '@wavemaker/app-rn-runtime/variables/device/camera/capture-image.operation';\nimport { CameraConsumer, CameraInput, CameraService } from \"@wavemaker/app-rn-runtime/core/device/camera-service\";\nimport { CaptureVideoOutput } from '@wavemaker/app-rn-runtime/variables/device/camera/capture-video.operation';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \n\n\nexport class WmCameraState extends BaseComponentState<WmCameraProps> {}\n\nexport default class WmCamera extends BaseComponent<WmCameraProps, WmCameraState, WmCameraStyles> {\n  private camera: CameraService = null as any;\n  public localFile: string = '';\n  constructor(props: WmCameraProps) {\n    super(props, DEFAULT_CLASS, new WmCameraProps());\n  }\n\n  onCameraTap() {\n    const props = this.state.props;\n    if (props.capturetype === 'IMAGE') {\n      const params: CameraInput = {\n        allowImageEdit: props.allowedit,\n        imageQuality: props.imagequality,\n        imageEncodingType: props.imageencodingtype,\n        imageTargetWidth: props.imagetargetwidth,\n        imageTargetHeight: props.imagetargetheight\n      };\n\n      this.camera.captureImage(params).then((res: CaptureImageOutput) => {\n        this.updateModel(null, res.imagePath, res.content);\n      });\n    } else {\n      this.camera.captureVideo().then((res: CaptureVideoOutput) => {\n        this.updateModel(null, res.videoPath, res.content);\n      });\n    }\n\n  }\n\n  private updateModel($event: any, value: any, content: string) {\n    value = (value.startsWith('file://') ? '' : 'file://') + value;\n    this.localFile = content;\n    this.updateState({\n      props: {\n        datavalue: value,\n        localFilePath: value\n      }\n    } as WmCameraState, this.invokeEventCallback.bind(this, 'onSuccess', [null, this.proxy, value, this.localFile]));\n  }\n\n  renderWidget(props: WmCameraProps) {\n    return (\n          <CameraConsumer>\n              {(cameraService: CameraService) => {\n              {this._background}\n              this.camera = cameraService;\n              return <View style={this.styles.root}>\n                <WmButton id={this.getTestId('button')} iconclass={props.iconclass} styles={this.styles.button} iconsize={props.iconsize} onTap={this.onCameraTap.bind(this)} accessibilitylabel={props.accessibilitylabel} hint={props.hint} accessibilityrole={props.accessibilityrole}></WmButton>\n              </View>\n            }}\n          </CameraConsumer>\n    );\n  }\n}\n"],"mappings":"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"}