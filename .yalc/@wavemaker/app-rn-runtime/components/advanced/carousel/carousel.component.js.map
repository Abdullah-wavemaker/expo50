{"version":3,"names":["React","isArray","isUndefined","Animated","Easing","View","DefaultKeyExtractor","WmIcon","BaseComponent","BaseComponentState","SwipeAnimation","Tappable","WmCarouselProps","DEFAULT_CLASS","WmCarouselState","constructor","arguments","_defineProperty","WmCarousel","props","Value","bounds","e","_this$slidesLayout","_this$slidesLayout$ac","activeTabIndex","state","activeIndex","lower","slidesLayout","filter","l","i","reduce","s","width","center","upper","computePhase","value","_this$slidesLayout$ac2","w","Math","abs","onLower","onSlideChange","onUpper","index","prevIndex","updateState","invokeEventCallback","animatePagination","item","type","renderSlide","children","data","dataset","length","_this$animationView","animationView","setPosition","_this$animationView2","goToUpper","_this$animationView3","goToLower","cleanup","push","stopPlay","addSlideLayout","nativeEvent","layout","forceUpdate","generateItemKey","itemkey","_showSkeleton","keyExtractor","getKey","autoPlay","animation","animationinterval","intervalId","setInterval","next","clearInterval","setTimeout","_this$animationView4","onPropertyChange","name","$new","$old","_this$keyExtractor","clear","min","_this$styles$dotStyle","_this$styles$dotStyle2","_this$styles$dotStyle3","margin","styles","dotStyle","marginLeft","marginRight","size","position","max","scale","options","useNativeDriver","duration","easing","out","linear","sequence","timing","dotScale","toValue","parallel","dotPosition","isRTL","start","renderPagination","maxNoOfDots","maxnoofdots","minIndex","maxIndex","createElement","style","dotsWrapperStyle","flexDirection","map","key","activeDotStyle","undefined","height","transform","translateX","right","left","renderWidget","_data","_this$styles$slide","hasNavs","controls","hasDots","noOfSlides","slideScale","slideTranslateX","slide","_this$styles$slide2","_this$styles$slide3","find","o","root","_background","enableGestures","enablegestures","direction","ref","r","handlers","animationHandlers","slideMinWidth","_this$animationView5","_this$animationView6","isActive","animationPhase","interpolate","inputRange","outputRange","onLayout","bind","firstSlide","lastSlide","activeSlide","onTap","_this$animationView7","rippleColor","renderItem","btnPanel","id","getTestId","iconclass","prevBtn","prev","accessibilitylabel","nextBtn"],"sources":["carousel.component.tsx"],"sourcesContent":["import React from 'react';\nimport { isArray, isUndefined } from 'lodash-es';\nimport { Animated, Easing, View, LayoutChangeEvent, LayoutRectangle } from 'react-native';\nimport { DefaultKeyExtractor } from '@wavemaker/app-rn-runtime/core/key.extractor';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\nimport * as SwipeAnimation from '@wavemaker/app-rn-runtime/gestures/swipe.animation';\nimport { Tappable } from '@wavemaker/app-rn-runtime/core/tappable.component';\n\nimport WmCarouselProps from './carousel.props';\nimport { DEFAULT_CLASS, WmCarouselStyles } from './carousel.styles';\n\nexport class WmCarouselState extends BaseComponentState<WmCarouselProps> {\n  activeIndex = 1;\n}\n\nexport default class WmCarousel extends BaseComponent<WmCarouselProps, WmCarouselState, WmCarouselStyles> {\n\n  noOfSlides: number = 0;\n  private slidesLayout: LayoutRectangle[] = [];\n  private keyExtractor = new DefaultKeyExtractor();\n  stopPlay: Function = null as any;\n  private dotScale = new Animated.Value(0);\n  private dotPosition = new Animated.Value(0);\n  private animationView: SwipeAnimation.View | null = null as any;\n  private animationHandlers = {\n    bounds: (e) => {\n      const activeTabIndex = this.state.activeIndex - 1;\n      let lower = 0;\n      if (activeTabIndex > 0) {\n        lower = this.slidesLayout\n          .filter((l , i) => i < activeTabIndex - 1)\n          .reduce((s, l) => s + l.width, 0);\n      }\n      let center = lower + (this.slidesLayout[activeTabIndex - 1]?.width || 0);\n      let upper = center + (this.slidesLayout[activeTabIndex]?.width || 0);\n      return {\n        lower: -1 * lower,\n        center: -1 * center,\n        upper:  -1 * upper\n      };\n    },\n    computePhase: (value) => {\n      const activeTabIndex = this.state.activeIndex - 1;\n      const w = this.slidesLayout[activeTabIndex]?.width || 0;\n      return w && Math.abs(value / w);\n    },\n    onLower: (e) => {\n      this.onSlideChange(this.state.activeIndex - 1);\n    },\n    onUpper: (e) => {\n      this.onSlideChange(this.state.activeIndex + 1);\n    }\n  } as SwipeAnimation.Handlers;\n\n  constructor(props: WmCarouselProps) {\n    super(props, DEFAULT_CLASS, new WmCarouselProps(), new WmCarouselState());\n    this.cleanup.push(() => {\n      this.stopPlay && this.stopPlay();\n    })\n  }\n\n  addSlideLayout(index: number, nativeEvent: LayoutChangeEvent) {\n    this.slidesLayout[index] = nativeEvent.nativeEvent.layout;\n    if (index === this.state.activeIndex) {\n      this.forceUpdate();\n    }\n  }\n\n  private generateItemKey(item: any, index: number, props: WmCarouselProps) {\n    if (props.itemkey && item && !this._showSkeleton) {\n      return props.itemkey(item, index);\n    }\n    return 'list_item_' +  this.keyExtractor.getKey(item, true);\n  }\n\n  autoPlay() {\n    const props = this.state.props;\n    this.stopPlay && this.stopPlay();\n    if (props.animation === 'auto' && props.animationinterval) {\n      const intervalId = setInterval(() => {\n        this.next();\n      }, props.animationinterval * 1000);\n      this.stopPlay = () => clearInterval(intervalId);\n    } else {\n      setTimeout(() => {\n        this.onSlideChange(1);\n        this.animationView?.setPosition(0);\n      }, 1000);\n    }\n  }\n\n  onPropertyChange(name: string, $new: any, $old: any): void {\n      super.onPropertyChange(name, $new, $old);\n      switch (name) {\n        case 'dataset': {\n          this.keyExtractor?.clear();\n          this.updateState({\n            activeIndex: Math.min(this.state.activeIndex, $new?.length || 1)\n          } as WmCarouselState);\n          break;\n        }\n        case 'animation':\n        case 'animationinterval' : {\n          this.autoPlay();\n        }\n      }\n  }\n\n  animatePagination(index: number) {\n    const prevIndex = this.state.activeIndex;\n    const margin = ((this.styles.dotStyle?.marginLeft as number)|| 0) + \n    ((this.styles.dotStyle?.marginRight as number)|| 0)\n    const width = (this.styles.dotStyle?.width as number)|| 2;\n    const size = margin + width;\n    const position = Math.max(index - 1, 0)  * size;\n    const scale = Math.abs(index - prevIndex) * size;\n    const options = {\n      useNativeDriver: true,\n      duration: 200,\n      easing: Easing.out(Easing.linear)\n    };\n    if (prevIndex < index) {\n      Animated.sequence([\n        Animated.timing(this.dotScale, {\n          toValue: scale,\n          ...options\n        }),\n        Animated.parallel([\n          Animated.timing(this.dotScale, {\n              toValue:  0,\n              ...options\n          }),\n          Animated.timing(this.dotPosition, {\n              toValue:  (this.isRTL ? -1: 1) * position,\n              ...options\n          })\n        ])\n      ]).start();\n    } else if (prevIndex > index) {\n      Animated.sequence([\n        Animated.parallel([\n          Animated.timing(this.dotScale, {\n              toValue:  scale,\n              ...options\n          }),\n          Animated.timing(this.dotPosition, {\n              toValue:  (this.isRTL ? -1: 1) * position,\n              ...options\n          })\n        ]),\n        Animated.timing(this.dotScale, {\n          toValue: 0,\n          ...options\n        }),\n      ]).start();\n    } \n  }\n\n  onSlideChange = (index: number) => {\n    const prevIndex = this.state.activeIndex;\n    this.updateState({\n      activeIndex: index\n    } as WmCarouselState,\n    () => this.invokeEventCallback('onChange', [this, index, prevIndex]));\n    this.animatePagination(index);\n  }\n\n  renderItem = (item: any, index: number) => {\n    const props = this.state.props;\n    if (props.type === 'dynamic') {\n      return props.renderSlide ? props.renderSlide(item, index, this) : null;\n    }\n    return props.children[index];\n  }\n\n  next = () => {\n    const props = this.state.props;\n    const data = props.type === 'dynamic' ? props.dataset : props.children;\n    if (this.state.activeIndex >= data?.length || 0) {\n      this.onSlideChange(1);\n      this.animationView?.setPosition(0);\n    } else {\n      this.animationView?.goToUpper();\n    }\n  }\n\n  prev = () => {\n    this.animationView?.goToLower();\n  }\n\n  renderPagination(data: any) {\n    const maxNoOfDots = this.state.props.maxnoofdots;\n    let minIndex = Math.max(this.state.activeIndex - maxNoOfDots + 1, 0);\n    let maxIndex = Math.min(minIndex + maxNoOfDots - 1, data.length);\n    if (maxIndex === data.length) {\n      minIndex = maxIndex - maxNoOfDots;\n    }\n    return (<View style={this.styles.dotsWrapperStyle}>\n      <View style={{flexDirection: this.isRTL ? 'row-reverse' : 'row'}}>\n        {\n          data.map((item: any, index: number) => {\n            return index >= minIndex && index <= maxIndex ? (\n              <View key={'dots_' + this.generateItemKey(item, index, this.state.props)} \n                style={[this.styles.dotStyle]}>\n              </View>) : null;\n          })\n        }\n        <Animated.View style={[\n          this.styles.dotStyle,\n          this.styles.activeDotStyle, {\n            width: undefined,\n            height: undefined,\n            transform: [{\n              translateX: this.dotPosition\n            }]\n          }, this.isRTL ? { right: 0 } : { left: 0}]}>\n            <Animated.View style={[{\n              width: 1,\n              height: 1\n            }, {\n              // This is failing in Android\n              // minWidth: this.dotScale\n            }]}>\n        </Animated.View>\n        </Animated.View>\n      </View>\n    </View>);\n  }\n\n  renderWidget(props: WmCarouselProps) {\n    const hasNavs = props.controls === 'both' || props.controls ==='navs';\n    const hasDots = props.controls === 'both' || props.controls ==='indicators';\n    let styles = this.styles;\n    let data = props.type === 'dynamic' ? props.dataset : props.children;\n    data = isArray(data) ? data : [];\n    this.noOfSlides = data?.length || 0;\n    let slideScale = undefined as any;\n    let slideTranslateX = undefined as any;\n    if (isArray(this.styles.slide?.transform)) {\n      slideScale = (this.styles.slide?.transform?.find(o => !isUndefined((o as any).scale)) as any)?.scale;\n      slideTranslateX = (this.styles.slide?.transform?.find(o => !isUndefined((o as any).translateX)) as any)?.translateX;\n    }\n    // TODO: loop prop on Carousel is not working Refer: https://github.com/meliorence/react-native-snap-carousel/issues/608\n    return (\n      <View style={styles.root}>\n        {this._background}\n        <SwipeAnimation.View \n            enableGestures={props.enablegestures}\n            style={{\n              height: props.type === 'dynamic' ? undefined : '100%',\n            }}\n            direction='horizontal'\n            ref={(r) => {this.animationView = r}}\n            handlers = {this.animationHandlers}\n            slideMinWidth={this.styles.slide.width}\n          >\n          {data.map((item: any, index: number) => {\n            const isActive = index === this.state.activeIndex - 1;\n            let scale = this.animationView?.animationPhase.interpolate({\n              inputRange: [-2000, index - 1, index, index + 1, 2000],\n              outputRange: [slideScale, slideScale, 1, slideScale, slideScale]\n            });\n            let translateX = this.animationView?.animationPhase.interpolate({\n              inputRange: [-2000, index - 1, index, index + 1, 2000],\n              outputRange: [-56, -56, 0, 56, 56]\n            });\n            return (\n              <Animated.View key={this.generateItemKey(item, index, props)}\n                onLayout={this.addSlideLayout.bind(this, index)}\n                style={[\n                  {height: props.type === 'dynamic' ? undefined : '100%'},\n                  this.styles.slide,\n                  index === 0 ? this.styles.firstSlide : null,\n                  index === data.length - 1 ? this.styles.lastSlide: null,\n                  isActive ? this.styles.activeSlide: null,\n                  translateX && scale ? {\n                    transform: [\n                      {\n                        translateX: !isUndefined(slideTranslateX) ? slideTranslateX : translateX\n                      }, {\n                        scale: scale\n                      }\n                    ]\n                  } : null]}>\n                <Tappable onTap={() => {\n                  this.onSlideChange(index + 1);\n                  const position = this.slidesLayout\n                    .filter((l , i) => i < index)\n                    .reduce((s, l) => s + l.width, 0);\n                  this.animationView?.setPosition(-1 * position);\n                }} rippleColor={this.styles.root.rippleColor}>\n                  {this.renderItem(item, index)}\n                </Tappable>\n              </Animated.View>\n            );\n          })}\n        </SwipeAnimation.View>\n        {hasNavs ? (\n          <View style={styles.btnPanel}>\n            <WmIcon\n              id={this.getTestId('prev_icon')}\n              iconclass=\"wi wi-chevron-left fa-2x\"\n              styles={styles.prevBtn}\n              onTap={this.prev}\n              accessibilitylabel='back'/>\n            <WmIcon\n              id={this.getTestId('next_icon')}\n              iconclass=\"wi wi-chevron-right fa-2x\"\n              styles={styles.nextBtn}\n              onTap={this.next}\n              accessibilitylabel='next'/>\n          </View>): null}\n          {hasDots && data ? this.renderPagination(data) : null}\n      </View>);\n  }\n}\n"],"mappings":"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"}