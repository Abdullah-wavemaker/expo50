{"version":3,"names":["React","ActivityIndicator","SectionList","Text","View","FlatList","isArray","isEmpty","isNil","isNumber","BaseComponent","BaseComponentState","getGroupedData","isDefined","Tappable","DefaultKeyExtractor","WmLabel","WmIcon","WmListProps","DEFAULT_CLASS","WmListState","constructor","arguments","_defineProperty","WmList","props","updateState","maxRecordsToShow","state","pagesize","isSelected","$item","selectedItem","selecteditem","indexOf","onSelect","$index","e","triggerTapEvent","length","undefined","disableitem","multiselect","index","selectionlimit","push","invokeEventCallback","splice","selectedItemWidgets","itemWidgets","selectedindex","proxy","loadDataOnDemand","navigation","loadData","loadingData","dataset","$list","loadingdata","getNextPageData","currentPage","then","data","hasMoreData","catch","err","console","error","setTimeout","selectFirstItem","initialized","groupby","clear","groupedData","selectItem","item","getItem","deselect","selectedItemIndex","getWidgets","widgetname","map","filter","widget","deselectAll","setGroupData","items","dataItems","match","orderby","dateformat","_this$keyExtractor","keyExtractor","onPropertyChange","name","$new","$old","direction","key","_this$keyExtractor2","selectfirstitem","pop","componentDidMount","_props$dataset","subscribe","event","scrollPosition","nativeEvent","contentOffset","y","layoutMeasurement","height","endThreshold","componentDidUpdate","prevProps","prevState","snapshot","getDefaultStyles","isHorizontal","theme","getStyle","defaultClass","getIndex","generateItemKey","itemkey","_showSkeleton","getKey","renderItem","cols","getNoOfColumns","createElement","style","styles","itemclass","_extends","getTestPropsForAction","onTap","onLongTap","onDoubleTap","display","flexDirection","width","paddingRight","marginRight","margin","id","getTestId","iconclass","selectedIcon","renderHeader","title","groupHeading","subheading","heading","flex","listIcon","caption","renderEmptyMessage","emptyMessage","nodatamessage","renderLoadingIcon","loadingicon","loadingIcon","loadingdatamsg","color","text","itemsperrow","xs","onLayoutChange","l","layout","renderWithFlatList","root","onLayout","v","i","group","scrollEnabled","horizontal","ListEmptyComponent","itemInfo","numColumns","onDemandMessage","ondemandmessage","getSectionListData","renderWithSectionList","contentContainerStyle","sections","renderSectionHeader","_ref","section","renderSectionFooter","renderWidget","_background"],"sources":["list.component.tsx"],"sourcesContent":["import React from 'react';\nimport { ActivityIndicator, SectionList, Text, View, FlatList, LayoutChangeEvent, GestureResponderEvent } from 'react-native';\nimport { isArray, isEmpty, isNil, isNumber, round } from 'lodash-es';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\nimport {getGroupedData, isDefined} from \"@wavemaker/app-rn-runtime/core/utils\";\nimport { Tappable } from '@wavemaker/app-rn-runtime/core/tappable.component';\nimport { DefaultKeyExtractor } from '@wavemaker/app-rn-runtime/core/key.extractor';\nimport WmLabel from '@wavemaker/app-rn-runtime/components/basic/label/label.component';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport ThemeVariables from '@wavemaker/app-rn-runtime/styles/theme.variables';\n\nimport WmListProps from './list.props';\nimport { DEFAULT_CLASS, WmListStyles } from './list.styles';\n\n\nexport class WmListState extends BaseComponentState<WmListProps> {\n  public selectedindex: any;\n  groupedData: Array<any> = [];\n  currentPage = 1;\n  maxRecordsToShow = 20;\n}\n\nexport default class WmList extends BaseComponent<WmListProps, WmListState, WmListStyles> {\n\n  private itemWidgets = [] as any[];\n  private selectedItemWidgets = {} as any;\n  private keyExtractor = new DefaultKeyExtractor();\n  private endThreshold = -1;\n  private loadingData = false;\n  private hasMoreData = true;\n  \n  constructor(props: WmListProps) {\n    super(props, DEFAULT_CLASS, new WmListProps(), new WmListState());\n    this.updateState({\n      maxRecordsToShow: this.state.props.pagesize\n    } as WmListState);\n  }\n\n  private isSelected($item: any) {\n    const selectedItem = this.state.props.selecteditem;\n    if (isArray(selectedItem)) {\n      return selectedItem.indexOf($item) >= 0;\n    }\n    return selectedItem === $item;\n  }\n\n  private onSelect($item: any, $index: number | string, e: any ,triggerTapEvent = false) {\n    const props = this.state.props;\n    let selectedItem = null as any;\n    if (props.disableitem !== true \n        && (typeof props.disableitem !== 'function' || !props.disableitem($item, $index))) {\n      if (props.multiselect) {\n        selectedItem = [...(props.selecteditem || [])];\n        const index = selectedItem.indexOf($item);\n        if (index < 0) {\n          if ((!props.selectionlimit)\n            || props.selectionlimit < 0\n            || selectedItem.length < props.selectionlimit) {\n            selectedItem.push($item);\n          } else {\n            this.invokeEventCallback('onSelectionlimitexceed', [null, this]);\n          }\n        } else {\n          selectedItem.splice(index, 1);\n        }\n      } else {\n        selectedItem = $item;\n      }\n      this.selectedItemWidgets = this.itemWidgets[$index as number];\n      this.updateState({\n        props: { selecteditem: selectedItem },\n        selectedindex: $index\n      } as WmListState, () => {\n        this.invokeEventCallback('onSelect', [this.proxy, $item]);\n        triggerTapEvent && this.invokeEventCallback('onTap', [e, this.proxy]);\n      });\n    }\n  }\n\n  private get loadDataOnDemand() {\n    const navigation = this.state.props.navigation;\n    return navigation === 'Scroll' || navigation === 'On-Demand';\n  }\n\n  private loadData() {\n    if (this.loadingData) {\n      return;\n    }\n    if (isArray(this.state.props.dataset) \n      && this.state.props.dataset.length > this.state.maxRecordsToShow) {\n      this.updateState({\n        maxRecordsToShow: this.state.maxRecordsToShow + this.state.props.pagesize\n      } as WmListState);\n    } else if (this.loadDataOnDemand) {\n      const $list = this.proxy as any;\n      $list.loadingdata = true;\n      this.loadingData = true;\n      this.props.getNextPageData && this.props.getNextPageData(null, this.proxy, this.state.currentPage + 1).then((data) => {\n        if (isArray(data) && data.length > 0\n          && isArray(this.state.props.dataset)) {\n            $list.dataset = [...this.state.props.dataset, ...data];\n            this.updateState({\n              currentPage : this.state.currentPage + 1,\n              maxRecordsToShow: this.state.maxRecordsToShow + this.state.props.pagesize\n            } as WmListState);\n            this.hasMoreData = true;\n        } else {\n          this.hasMoreData = false;\n        }\n      }).catch((err) => {\n        console.error(err);\n      }).then(() => {\n        setTimeout(() => {\n          $list.loadingdata = false;\n        }, 1000);\n      });\n    }\n  }\n\n  private selectFirstItem() {\n    const props = this.state.props;\n    if (this.initialized\n      && props.dataset\n      && props.dataset.length) {\n        const index = props.groupby ? '00': 0;\n        this.onSelect(props.dataset[0], index, null);\n      }\n  }\n  \n  clear(){\n    this.updateState({\n      groupedData: {},\n    } as WmListState);\n  }\n\n  selectItem(item: any){\n    const dataset = this.state.props.dataset;\n    if(isNumber(item)){\n      this.onSelect(dataset[item], item, null);\n    }\n    else{\n      let index = dataset.indexOf(item);\n      this.onSelect(dataset[index], index, null);\n    }\n  }\n\n  getItem(index: number){\n    const props = this.state.props;\n    return this.props.dataset[index]\n  }\n\n  deselect(item: any){\n    const props = this.state.props;\n    let selectedItem = null as any;\n    let index = isNumber(item)?item:props.dataset.indexOf(item);\n    if(props.multiselect && index >= 0){\n      selectedItem = [...(props.selecteditem || [])];\n      let selectedItemIndex = selectedItem.indexOf(props.dataset[index])\n      if(selectedItemIndex >= 0){\n        selectedItem.splice(selectedItemIndex, 1);\n      }\n    }\n    else{\n      if (props.selecteditem === props.dataset[index]) {\n        selectedItem = null;\n      }\n    }\n    this.updateState({\n      props: { selecteditem: selectedItem },\n      \n    } as WmListState);\n  }\n  \n  getWidgets(widgetname: string, index: number){\n    if(index >= 0 && index < this.itemWidgets.length){\n      return this.itemWidgets[index][widgetname]\n    }\n    else{\n      return this.itemWidgets.map(item => item[widgetname]).filter(widget => widget !== undefined);\n    }\n  }\n\n  private deselectAll() {\n    this.updateState({\n      props: { selecteditem: null },\n      selectedindex: -1\n    } as WmListState);\n  }\n\n  setGroupData(items: any) {\n    const dataItems = items;\n    const props = this.state.props;\n    if (props.groupby) {\n      const groupedData = dataItems && getGroupedData(dataItems, props.groupby, props.match, props.orderby, props.dateformat, this);\n      this.updateState({\n        groupedData: groupedData\n      } as WmListState, () => {\n        this.keyExtractor?.clear();\n      });\n    }\n  }\n\n  public onPropertyChange(name: string, $new: any, $old: any) {\n    super.onPropertyChange(name, $new, $old);\n    const props = this.state.props;\n    switch(name) {\n      case 'selectfirstitem':\n        if ($new) {\n          this.selectFirstItem();\n        }\n      break;\n      case 'dataset':\n        if (this.state.props.groupby) {\n          this.setGroupData($new);\n        } else {\n          if (!($old && $old.length)\n            && $new && $new.length\n            && this.loadDataOnDemand) {\n              this.updateState({\n                props: {\n                  dataset: [...$new]\n                }\n              } as WmListState);\n          }\n          const data = isArray($new) ? $new : (!isEmpty($new) && isDefined($new) ? [$new] : []);\n          this.updateState({\n            groupedData: (data[0] || props.direction === 'horizontal' ? [{\n              key: 'key',\n              data: data\n            }] : [])\n          } as WmListState, () => {\n            this.keyExtractor?.clear();\n          });\n        }\n        this.itemWidgets = [];\n        if (props.selectfirstitem) {\n          this.selectFirstItem();\n        } else {\n          this.deselectAll();\n        }\n      break;\n      case 'groupby':\n      case 'match':\n        this.setGroupData(this.state.props.dataset);\n        break;\n      case 'multiselect':\n        if ($new) {\n          if (!isArray(this.state.props.selecteditem)) {\n            this.state.props.selecteditem = this.state.props.selecteditem ? \n              [this.state.props.selecteditem] : [];\n          }\n        } else if (isArray(this.state.props.selecteditem)) {\n          this.state.props.selecteditem = this.state.props.selecteditem.pop();\n        }\n        break;\n      case 'loadingdata': \n        this.loadingData = $new && this.loadingData;\n        break;\n      case 'selecteditem':\n        if($new != $old && isNumber($new)) {\n          this.selectItem(this.state.props.dataset[$new])\n        }\n        break;\n    }\n  }\n\n  componentDidMount() {\n    const props = this.state.props;\n    if (this.state.props.selectfirstitem && props.dataset?.length) {\n      setTimeout(() => {\n        this.onSelect(props.dataset[0], 0, null);\n      });\n    }\n    this.subscribe('scroll', (event: any) => {\n      const scrollPosition = event.nativeEvent.contentOffset.y  + event.nativeEvent.layoutMeasurement.height;\n      if (scrollPosition > this.endThreshold && this.state.props.direction === 'vertical') {\n        this.loadData();\n      }\n    });\n    super.componentDidMount();\n  }\n\n  componentDidUpdate(prevProps: WmListProps, prevState: WmListState, snapshot?: any) {\n    super.componentDidUpdate && super.componentDidUpdate(prevProps, prevState, snapshot);\n    this.invokeEventCallback('onRender', [this, this.state.props.dataset]);\n  }\n\n  getDefaultStyles() {\n    const isHorizontal = this.state.props.direction === 'horizontal';\n    return this.theme.getStyle(`${this.defaultClass} ${isHorizontal ? 'app-horizontal-list' : 'app-vertical-list'}`);\n  }\n\n  getIndex(item: any) {\n    return this.state.props.dataset.indexOf(item);\n  }\n\n  private generateItemKey(item: any, index: number, props: WmListProps) {\n    if (props.itemkey && item && !this._showSkeleton) {\n      return props.itemkey(item, index);\n    }\n    return 'list_item_' +  this.keyExtractor.getKey(item, true);\n  }\n\n  private renderItem(item: any, index: number, props: WmListProps) {\n    const cols = this. getNoOfColumns();\n    const isHorizontal = (props.direction === 'horizontal');\n    return (index < this.state.maxRecordsToShow || isHorizontal) ? (  \n      <View style={[\n        this.styles.item,\n        props.itemclass ? this.theme.getStyle(props.itemclass(item, index)) : null,\n        this.isSelected(item) ? this.styles.selectedItem : {}]}>\n        <Tappable\n          {...this.getTestPropsForAction(`item${index}`)}\n          onTap={(e: any) => this.onSelect(item, index, e, true)}\n          onLongTap={() => this.invokeEventCallback('onLongtap', [null, this.proxy])}\n          onDoubleTap={() => this.invokeEventCallback('onDoubletap', [null, this.proxy])}\n          styles={\n            [{display: 'flex', flexDirection : 'row'},\n              cols ? {\n                width: '100%'\n              } : null,\n              cols || isHorizontal ? {\n                paddingRight: (isNil(this.styles.item.marginRight)\n                  ? this.styles.item.margin : this.styles.item.marginRight) || 4\n              } : null\n            ]\n          }>\n          {props.renderItem(item, index, this)}\n          {this.isSelected(item) ? (\n            <WmIcon id={this.getTestId('icon' + index)} iconclass='wi wi-check-circle' styles={this.styles.selectedIcon} />\n          ) : null}\n        </Tappable>\n      </View>\n      ) : null;\n  }\n\n  private renderHeader(props: WmListProps, title: string) {\n    return props.groupby ? (\n      <Text style={this.styles.groupHeading}>{title}</Text>\n    ) : (props.iconclass || props.title || props.subheading) ? (\n      <View style={this.styles.heading}>\n        <View style={{flex: 1, flexDirection: 'row'}}>\n          <WmIcon id={this.getTestId('icon')} styles={this.styles.listIcon} iconclass={props.iconclass}></WmIcon>\n          <View>\n            <WmLabel id={this.getTestId('title')} styles={this.styles.title} caption={props.title}></WmLabel>\n            <WmLabel id={this.getTestId('subheading')} styles={this.styles.subheading} caption={props.subheading}></WmLabel>\n          </View>\n        </View>\n      </View>) : null;\n  }\n\n  private renderEmptyMessage(isHorizontal: boolean, item: any, index: any, props: WmListProps) {\n    return (<WmLabel  id={this.getTestId('emptymsg')} styles={this.styles.emptyMessage} caption={props.nodatamessage}></WmLabel>);\n  }\n\n  private renderLoadingIcon(props: WmListProps) {\n    return props.loadingicon ? (<WmIcon\n      id={this.getTestId('loadingicon')}\n      styles={this.styles.loadingIcon}\n      iconclass={props.loadingicon}\n      caption={props.loadingdatamsg}></WmIcon>)\n      : (\n        <ActivityIndicator color={this.styles.loadingIcon.text.color}></ActivityIndicator>\n      );\n  }\n\n  public getNoOfColumns() {\n    const props = this.state.props;\n    if(props.direction === 'vertical') {\n      return props.itemsperrow.xs;\n    }\n    return 0;\n  }\n\n  private onLayoutChange(e: LayoutChangeEvent) {\n    const l = e.nativeEvent.layout;\n    this.endThreshold = l.height + l.y - 100;\n    if (!this.endThreshold) {\n      this.endThreshold = -1;\n    }\n  }\n\n  private renderWithFlatList(props: WmListProps, isHorizontal = false) {\n    return (\n    <View style={this.styles.root} onLayout={e => this.onLayoutChange(e)}>\n      {!isEmpty(this.state.groupedData) ? this.state.groupedData.map((v: any, i) => ((\n          <View style={this.styles.group} key={v.key || this.keyExtractor.getKey(v, true)}>\n            {this.renderHeader(props, v.key)}\n            <FlatList\n              key={props.name + '_' + (isHorizontal ? 'H' : 'V') + props.itemsperrow.xs}\n              keyExtractor={(item, i) => this.generateItemKey(item, i, props)}\n              scrollEnabled={isHorizontal}\n              horizontal = {isHorizontal}\n              data={isEmpty(v.data[0]) ? []: v.data}\n              ListEmptyComponent = {(itemInfo) => this.renderEmptyMessage(isHorizontal, itemInfo.item, itemInfo.index, props)}\n              renderItem={(itemInfo) => this.renderItem(itemInfo.item, itemInfo.index, props)} \n              {...(isHorizontal ? {} : {numColumns : this.getNoOfColumns()})}> \n            </FlatList>\n            {this.loadDataOnDemand || (v.data.length > this.state.maxRecordsToShow) ? \n              (this.loadingData ? \n                this.renderLoadingIcon(props) :\n                (<WmLabel id={this.getTestId('ondemandmessage')}\n                  styles={this.styles.onDemandMessage}\n                  caption={this.hasMoreData && !isHorizontal ? props.ondemandmessage : props.nodatamessage}\n                  onTap={() => this.loadData()}></WmLabel>))\n              : null}\n          </View>\n        ))) : this.renderEmptyMessage(isHorizontal, null, null,props)\n      }\n    </View>);\n  }\n\n  private getSectionListData() {\n    if (this._showSkeleton) {\n      return [{\n        key: '',\n        data: [{}, {}, {}]\n      }];\n    } else if (this.state.groupedData \n        && this.state.groupedData[0] \n        && this.state.groupedData[0]['data'].length) {\n      return this.state.groupedData;\n    }\n    return [];\n  }\n\n  private renderWithSectionList(props: WmListProps, isHorizontal = false) {  \n    return (\n      <SectionList\n        keyExtractor={(item, i) => this.generateItemKey(item, i, props)}\n        horizontal = {isHorizontal}\n        contentContainerStyle={this.styles.root}\n        sections={this.getSectionListData()}\n        renderSectionHeader={({ section: {key, data}}) => {\n          return this.renderHeader(props, key);\n        }}\n        renderSectionFooter={() => props.loadingdata ? this.renderLoadingIcon(props) : null}\n        ListEmptyComponent = {(itemInfo) => this.renderEmptyMessage(isHorizontal, itemInfo.item, itemInfo.index, props)}\n        renderItem={(itemInfo) => this.renderItem(itemInfo.item, itemInfo.index, props)}>\n      </SectionList>\n    );\n  }\n\n  renderWidget(props: WmListProps) {\n    this.invokeEventCallback('onBeforedatarender', [this, this.state.props.dataset]);\n    const isHorizontal = (props.direction === 'horizontal');\n    return (\n        <View style={isHorizontal ? null : { width: '100%' }}>\n          {this._background}\n          {(isHorizontal || !props.groupby) ?\n            this.renderWithFlatList(props, isHorizontal)\n          : this.renderWithSectionList(props, isHorizontal)}\n      </View>);\n  }\n}\n"],"mappings":"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"}