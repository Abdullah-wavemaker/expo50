{"version":3,"names":["React","View","ModalConsumer","AssetProvider","HideMode","ThemeProvider","BaseComponent","BaseComponentState","WmIcon","WmButton","WmDialogProps","DEFAULT_CLASS","WmDialogState","constructor","arguments","_defineProperty","WmDialog","props","hideMode","DONOT_ADD_TO_DOM","state","modalOptions","onClose","Promise","res","updateState","show","invokeEventCallback","onOpen","open","close","_close","prepareModalOptions","content","modalService","o","name","modalStyle","styles","modal","contentStyle","isModal","centered","animation","hideModal","renderWidget","createElement","showModal","value","loadAsset","theme","style","root","_background","showheader","header","headerLabel","iconclass","iconurl","id","getTestId","caption","title","icon","iconheight","iconmargin","iconwidth","closable","onTap","closeBtn","children"],"sources":["dialog.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, View } from 'react-native';\n\nimport { ModalConsumer, ModalOptions, ModalService } from '@wavemaker/app-rn-runtime/core/modal.service';\nimport { AssetProvider } from '@wavemaker/app-rn-runtime/core/asset.provider';\nimport { HideMode } from '@wavemaker/app-rn-runtime/core/if.component';\nimport { ThemeProvider } from '@wavemaker/app-rn-runtime/styles/theme';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport WmButton from '@wavemaker/app-rn-runtime/components/basic/button/button.component';\n\nimport WmDialogProps from './dialog.props';\nimport { DEFAULT_CLASS, WmDialogStyles } from './dialog.styles';\n\nexport class WmDialogState extends BaseComponentState<WmDialogProps> {\n  modalOptions = {} as ModalOptions;\n}\n\nexport default class WmDialog extends BaseComponent<WmDialogProps, WmDialogState, WmDialogStyles> {\n\n  private _close: Function = () => {};\n\n  constructor(props: WmDialogProps) {\n    super(props, DEFAULT_CLASS, new WmDialogProps(), new WmDialogState());\n    this.hideMode = HideMode.DONOT_ADD_TO_DOM;\n    this.state.modalOptions.onClose = () => {\n      return new Promise<void>((res) => {\n        this.updateState({\n          props: {show: false}\n        } as WmDialogState, () => {\n          this.invokeEventCallback('onClose', [null, this]);\n          res();\n        });\n      });\n    };\n    this.state.modalOptions.onOpen = () => {\n      this.invokeEventCallback('onOpened', [null, this]);\n    };\n  }\n\n  open() {\n    if (!this.state.props.show) {\n      this.updateState({\n        props:{show: true}\n      } as WmDialogState);\n    }\n  }\n\n  close() {\n    this._close();\n  }\n\n  prepareModalOptions(content: React.ReactNode, modalService: ModalService) {\n    const o = this.state.modalOptions;\n    o.name = this.state.props.name;\n    o.modalStyle = this.styles.modal;\n    o.content = content;\n    o.contentStyle = this.styles.content;\n    o.isModal = !!this.state.props.modal;\n    o.centered = true;\n    o.animation = this.state.props.animation;\n    this._close = () => modalService.hideModal(this.state.modalOptions);\n    return o;\n  }\n\n  renderWidget(props: WmDialogProps) {\n    return (<ModalConsumer>\n      {(modalService: ModalService) => {\n        modalService.showModal(this.prepareModalOptions((\n          <AssetProvider value={this.loadAsset}>\n            <ThemeProvider value={this.theme}>\n              <View style={this.styles.root}>\n              {this._background}\n                {props.showheader ? (<View style={this.styles.header}>\n                  <View style={this.styles.headerLabel}>\n                  {props.iconclass || props.iconurl ? \n                    <WmIcon id={this.getTestId('icon')}\n                     caption={props.title}\n                     iconclass={props.iconclass}\n                     styles={this.styles.icon}\n                     iconurl={props.iconurl}\n                     iconheight={props.iconheight}\n                     iconmargin={props.iconmargin}\n                     iconwidth={props.iconwidth}\n                     /> : null}\n                  </View>\n                  {props.closable && <WmButton id={this.getTestId('closebtn')} show={props.closable} iconclass=\"wm-sl-l sl-close\" onTap={() => this.close()} styles={this.styles.closeBtn}></WmButton>}\n                </View>) : null}\n                {props.children}\n              </View>\n            </ThemeProvider>\n          </AssetProvider>\n        ), modalService));\n        return null;\n      }}\n    </ModalConsumer>);\n  }\n}\n"],"mappings":"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"}