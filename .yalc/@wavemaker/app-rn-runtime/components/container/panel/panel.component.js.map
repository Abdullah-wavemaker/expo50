{"version":3,"names":["React","Text","View","TouchableOpacity","isUndefined","Badge","BaseComponent","BaseComponentState","WmIcon","WmPanelProps","DEFAULT_CLASS","isWebPreviewMode","CollapsiblePane","WmPanelState","constructor","arguments","_defineProperty","WmPanel","props","onPartialLoad","invokeEventCallback","renderContent","renderPartial","state","isPartialLoaded","setTimeout","updateState","bind","onPanelPress","collapsible","eventName","expanded","proxy","expandCollapseIcon","isExpanded","widgetProps","badge","badgevalue","undefined","createElement","style","styles","badgetype","iconclass","name","toggleIcon","flexDirection","alignItems","renderHeader","_extends","getTestPropsForAction","header","onPress","iconurl","icon","iconheight","iconwidth","iconmargin","flex","justifyContent","text","heading","title","subheading","renderPane","content","maxHeight","overflow","close","renderWidget","root","_background","Fragment","children"],"sources":["panel.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, View, TouchableOpacity } from 'react-native';\nimport { isUndefined } from 'lodash';\nimport { Badge } from 'react-native-paper';\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\n\nimport WmPanelProps from './panel.props';\nimport { DEFAULT_CLASS, WmPanelStyles } from './panel.styles';\nimport { isWebPreviewMode } from '@wavemaker/app-rn-runtime/core/utils';\nimport { CollapsiblePane } from './collapsible-pane.component';\n\nexport class WmPanelState extends BaseComponentState<WmPanelProps> {\n  isPartialLoaded = false;\n}\n\nexport default class WmPanel extends BaseComponent<WmPanelProps, WmPanelState, WmPanelStyles> {\n  constructor(props: WmPanelProps) {\n    super(props, DEFAULT_CLASS, new WmPanelProps());\n  }\n\n  onPartialLoad() {\n    this.invokeEventCallback('onLoad', [this]);\n  }\n\n  renderContent(props: WmPanelProps) {\n    if (props.renderPartial) {\n      if (!this.state.isPartialLoaded) {\n        setTimeout(() => {\n          this.updateState({\n            isPartialLoaded: true\n          } as WmPanelState);\n        });\n      }\n      return props.renderPartial(props, this.onPartialLoad.bind(this));\n    }\n  }\n\n  onPanelPress() {\n    if (!this.state.props.collapsible) {\n      return;\n    }\n    const eventName = this.state.props.expanded ? 'onCollapse' : 'onExpand';\n    this.updateState({\n      props: {\n        expanded: !this.state.props.expanded\n      }\n    } as WmPanelState);\n\n    this.invokeEventCallback(eventName, [null, this.proxy]);\n  }\n\n  expandCollapseIcon(isExpanded: boolean) {\n    const widgetProps = this.state.props;\n    //@ts-ignore\n    const badge = widgetProps.badgevalue != undefined ? (<Badge style={[this.styles.badge, this.styles[widgetProps.badgetype || 'default']]}>{widgetProps.badgevalue}</Badge>): null;\n    const iconclass = isExpanded ? 'wi wi-chevron-up' : 'wi wi-chevron-down';\n    const expandCollapseIcon = widgetProps.collapsible ? (<WmIcon name={'expand_collapse_icon'} styles={this.styles.toggleIcon} iconclass={iconclass}></WmIcon>) : null;\n    return (<View style={{flexDirection: 'row', alignItems: 'center'}}>{badge}{expandCollapseIcon}</View>);\n  }\n\n  renderHeader() {\n    const props = this.state.props;\n    return (\n      <TouchableOpacity\n        {...this.getTestPropsForAction(`header`)}\n        style={[this.styles.header]}\n        onPress={this.onPanelPress.bind(this)}>\n      {props.iconclass || props.iconurl ? \n        <WmIcon styles={this.styles.icon} \n        name={props.name + '_icon'}\n        iconclass={props.iconclass}\n        iconheight={props.iconheight}\n        iconwidth={props.iconwidth}\n        iconmargin={props.iconmargin}\n        iconurl={props.iconurl}\n        /> : null}\n        <View style={{flexDirection: 'column', flex: 1, justifyContent: 'center'}}>\n          <Text style={[\n            this.styles.text,\n            this.styles.heading]}\n            {...this.getTestPropsForAction(`header_title`)}>\n              {isUndefined(props.title) ? 'Title' : props.title}\n          </Text>\n          {props.subheading ? \n            (<Text style={this.styles.subheading}\n              {...this.getTestPropsForAction(`subheader`)}>{props.subheading}</Text>) : null }\n        </View>\n        {this.expandCollapseIcon(props.expanded)}\n      </TouchableOpacity>\n    );\n  }\n\n  renderPane(content: React.ReactNode) {\n    const expanded = this.state.props.expanded;\n    return isWebPreviewMode() ? \n      (<View style={expanded ? {} : {maxHeight: 0, overflow: 'hidden'}}>\n        {content}\n      </View>) :\n      (<CollapsiblePane close={!expanded}>\n        {content}\n      </CollapsiblePane>);\n  }\n\n  renderWidget(props: WmPanelProps) {\n    return (<View style={this.styles.root}>\n      {this._background}\n      {this.renderHeader()}\n      {this.renderPane((\n        <>\n        {this.renderContent(props)}\n        <View>{props.children}</View>\n        </>\n      ))}\n    </View>);\n  }\n}\n"],"mappings":"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"}