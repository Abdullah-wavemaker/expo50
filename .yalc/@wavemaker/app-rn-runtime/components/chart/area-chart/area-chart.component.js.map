{"version":3,"names":["React","Color","View","Text","Platform","Defs","LinearGradient","Stop","VictoryArea","VictoryChart","VictoryStack","VictoryScatter","VictoryGroup","WmAreaChartProps","DEFAULT_CLASS","BaseChartComponent","BaseChartComponentState","WmIcon","isNumber","AccessibilityWidgetType","getAccessibilityProps","WmAreaChartState","constructor","arguments","_defineProperty","WmAreaChart","props","e","viewWidth","nativeEvent","layout","width","updateState","chartWidth","onSelect","event","data","value","index","y","label","state","xaxisDatakeyArr","datum","x","selectedItem","dataset","selectedChartItem","series","_dataObj","invokeEventCallback","proxy","renderWidget","_this$state$data","length","mindomain","xdomain","chartMinX","undefined","ydomain","chartMinY","chartName","name","gradientStop","chartMaxY","createElement","_extends","LINECHART","style","styles","root","onLayout","onViewLayoutChange","bind","flexDirection","alignItems","iconclass","icon","title","subHeading","subheading","theme","height","padding","top","offsettop","bottom","offsetbottom","left","offsetleft","right","offsetright","minDomain","containerComponent","getTooltip","getLegendView","getXaxis","getYAxis","map","d","i","key","id","x1","y1","x2","y2","offset","stopColor","colors","lighten","rgb","toString","interpolation","fill","stroke","strokeWidth","linethickness","isRTL","toReversed","size","highlightpoints","opacity","events","target","eventHandlers","OS","onClick","onPress"],"sources":["area-chart.component.tsx"],"sourcesContent":["import React from 'react';\nimport Color from \"color\";\nimport { LayoutChangeEvent, View, Text, Platform } from 'react-native';\nimport { Defs, LinearGradient, Stop, Svg } from 'react-native-svg';\nimport { VictoryArea, VictoryLine, VictoryChart, VictoryLegend, VictoryStack, VictoryScatter, VictoryGroup } from \"victory-native\";\nimport { InterpolationPropType } from 'victory-core';\nimport WmAreaChartProps from './area-chart.props';\nimport { DEFAULT_CLASS, WmAreaChartStyles } from './area-chart.styles';\nimport {\n  BaseChartComponent,\n  BaseChartComponentState\n} from \"@wavemaker/app-rn-runtime/components/chart/basechart.component\";\nimport WmIcon from \"@wavemaker/app-rn-runtime/components/basic/icon/icon.component\";\n\nimport ThemeVariables from '@wavemaker/app-rn-runtime/styles/theme.variables';\nimport { isNil, isNumber } from 'lodash-es';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \n\nexport class WmAreaChartState extends BaseChartComponentState<WmAreaChartProps> {\n  chartWidth = 0;\n}\n\nexport default class WmAreaChart extends BaseChartComponent<WmAreaChartProps, WmAreaChartState, WmAreaChartStyles> {\n\n  constructor(props: WmAreaChartProps) {\n    super(props, DEFAULT_CLASS, new WmAreaChartProps(), new WmAreaChartState());\n  }\n\n  onViewLayoutChange = (e: LayoutChangeEvent) => {\n    let viewWidth = e.nativeEvent.layout.width;\n    this.updateState({\n      chartWidth: viewWidth\n    } as WmAreaChartState)\n  }\n\n  onSelect(event: any, data: any){\n    let value = data.data[data.index].y;\n    let label = this.state.xaxisDatakeyArr[data.datum.x];\n    let selectedItem = this.props.dataset[data.index];\n    let selectedChartItem = [{series: 0, x: data.index, y: value,_dataObj: selectedItem},data.index];\n    this.invokeEventCallback('onSelect', [event.nativeEvent, this.proxy, selectedItem, selectedChartItem ]);\n  }\n\n  renderWidget(props: WmAreaChartProps) {\n    this.invokeEventCallback('onBeforerender', [this.proxy, null]);\n    if (!this.state.data?.length) {\n      return null;\n    }\n    let mindomain={\n      x: props.xdomain === 'Min' ? this.state.chartMinX: undefined,\n      y: props.ydomain === 'Min' ? this.state.chartMinY: undefined\n    };\n    const chartName = this.props.name ?? 'nonameAreachart';\n    let gradientStop = '100%';\n    if (isNumber(this.state.chartMaxY) && isNumber(this.state.chartMinY) && this.state.chartMaxY > 0) {\n      gradientStop = (this.state.chartMaxY - this.state.chartMinY) * 100 / this.state.chartMaxY + '%';\n    }\n    return (\n      <View\n        {...getAccessibilityProps(AccessibilityWidgetType.LINECHART, props)}\n        style={this.styles.root}\n        onLayout={this.onViewLayoutChange.bind(this)}\n      >\n        <View>\n          <View style={{flexDirection: 'row', alignItems: 'center'}}>\n            {props.iconclass ? (<WmIcon iconclass={props.iconclass} styles={this.styles.icon}></WmIcon>) : null }\n            <Text style={this.styles.title}>{props.title}</Text>\n          </View>\n          <Text style={this.styles.subHeading}>{props.subheading}</Text>\n        </View>\n        {this.state.chartWidth ? \n        (\n          <VictoryChart\n            theme={this.state.theme}\n            height={this.styles.root.height as number}\n            width={this.state.chartWidth || 120}\n            padding={{ top: props.offsettop, bottom: props.offsetbottom, left: props.offsetleft, right: props.offsetright }}\n            minDomain={mindomain}\n            containerComponent={\n              this.getTooltip(props)\n            }\n          > \n            {this.getLegendView()}\n            {this.getXaxis()}\n            {this.getYAxis()}\n            <VictoryStack>\n            {\n              this.state.data.map((d: any, i: number) => {\n                return <VictoryGroup key={props.name + '_area_group_' + i}>\n                  <Defs>\n                    <LinearGradient id={`${chartName}Gradient${i}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                      <Stop offset=\"0%\" stopColor={Color(this.state.colors[i]).lighten(0.2).rgb().toString()}/>\n                      <Stop offset={gradientStop} stopColor={Color(this.state.colors[i]).lighten(0.6).rgb().toString()}/>\n                    </LinearGradient>\n                  </Defs>\n                  <VictoryArea\n                    interpolation={props.interpolation as InterpolationPropType}\n                    key={props.name + '_' + i}\n                    name={props.name + '_' + i}\n                    style={{\n                      data: {\n                        fill: `url(#${chartName}Gradient${i})`,\n                        stroke: this.state.colors[i],\n                        strokeWidth: props.linethickness,\n                      }\n                    }}\n                    data={this.isRTL?d.toReversed():d}\n                  />\n                    <VictoryScatter\n                      size={5}\n                      key={props.name + '_scatter' + i}\n                      style={{\n                        data: props.highlightpoints ? {fill: this.state.colors[i], opacity: 0.8}:{opacity: 0}\n                      }}        \n                      data={this.isRTL?d.toReversed():d}\n                      events={[{\n                        target: 'data',\n                        eventHandlers: Platform.OS == \"web\" ? {\n                          onClick: this.onSelect.bind(this)\n                        }:{\n                          onPress: this.onSelect.bind(this)\n                        }\n                      }]}\n                      />\n                </VictoryGroup>\n              })\n            }\n            </VictoryStack>\n          </VictoryChart>\n        )\n      : null}\n    </View>);\n  }\n}\n"],"mappings":"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"}