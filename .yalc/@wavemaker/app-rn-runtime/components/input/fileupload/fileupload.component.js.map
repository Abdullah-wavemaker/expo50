{"version":3,"names":["React","Platform","View","DocumentPicker","BaseComponent","BaseComponentState","WmFileuploadProps","DEFAULT_CLASS","WmButton","WmFileuploadState","constructor","arguments","_defineProperty","namedParameters","copyToCacheDirectory","multiple","type","WmFileupload","props","onTap","getDocumentAsync","then","response","selectedFile","OS","mimeType","file","invokeEventCallback","proxy","updateState","selectedFiles","bind","renderWidget","createElement","style","styles","root","_background","accessibilitylabel","caption","hint","id","getTestId","iconclass","button","iconsize"],"sources":["fileupload.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Platform, View } from 'react-native';\nimport * as DocumentPicker from 'expo-document-picker';\n\nimport { BaseComponent, BaseComponentState } from '@wavemaker/app-rn-runtime/core/base.component';\n\nimport WmFileuploadProps from './fileupload.props';\nimport { DEFAULT_CLASS, WmFileuploadStyles } from './fileupload.styles';\nimport WmButton from '@wavemaker/app-rn-runtime/components/basic/button/button.component';\n\nexport interface SelectFileOutput {\n  mimeType: string;\n  name: string;\n  size: number;\n  type: 'cancel' | 'success';\n  uri: string;\n}\n\nexport class WmFileuploadState extends BaseComponentState<WmFileuploadProps> {\n  selectedFiles: any;\n}\n\nconst namedParameters = {\n  copyToCacheDirectory: false,\n  multiple: false,\n  type: '*/*'\n};\n\nexport default class WmFileupload extends BaseComponent<WmFileuploadProps, WmFileuploadState, WmFileuploadStyles> {\n\n  constructor(props: WmFileuploadProps) {\n    super(props, DEFAULT_CLASS, new WmFileuploadProps());\n  }\n\n  onTap() {\n    DocumentPicker.getDocumentAsync(namedParameters).then((response: any) => {\n      let selectedFile;\n      if (Platform.OS !== 'web') {\n        selectedFile = response;\n        selectedFile.type = selectedFile.mimeType;\n      } else {\n        selectedFile = response.file;\n      }\n      this.invokeEventCallback('onBeforeselect', [null, this.proxy, selectedFile]);\n\n      this.updateState({\n          props: {\n          selectedFiles: selectedFile\n        }\n      } as WmFileuploadState, this.invokeEventCallback.bind(this, 'onSelect', [null, this.proxy, selectedFile]));\n    });\n  }\n\n  renderWidget(props: WmFileuploadProps) {\n    return <View style={this.styles.root}>\n      {this._background}\n      <WmButton accessibilitylabel={props.accessibilitylabel || props.caption} hint = {props.hint} id={this.getTestId()} iconclass={props.iconclass} caption={props.caption} styles={this.styles.button} iconsize={props.iconsize} onTap={this.onTap.bind(this)}></WmButton>\n    </View>\n  }\n}\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,IAAI,QAAQ,cAAc;AAC7C,OAAO,KAAKC,cAAc,MAAM,sBAAsB;AAEtD,SAASC,aAAa,EAAEC,kBAAkB,QAAQ,+CAA+C;AAEjG,OAAOC,iBAAiB,MAAM,oBAAoB;AAClD,SAASC,aAAa,QAA4B,qBAAqB;AACvE,OAAOC,QAAQ,MAAM,oEAAoE;AAUzF,OAAO,MAAMC,iBAAiB,SAASJ,kBAAkB,CAAoB;EAAAK,YAAA;IAAA,SAAAC,SAAA;IAAAC,eAAA;EAAA;AAE7E;AAEA,MAAMC,eAAe,GAAG;EACtBC,oBAAoB,EAAE,KAAK;EAC3BC,QAAQ,EAAE,KAAK;EACfC,IAAI,EAAE;AACR,CAAC;AAED,eAAe,MAAMC,YAAY,SAASb,aAAa,CAA2D;EAEhHM,WAAWA,CAACQ,KAAwB,EAAE;IACpC,KAAK,CAACA,KAAK,EAAEX,aAAa,EAAE,IAAID,iBAAiB,CAAC,CAAC,CAAC;EACtD;EAEAa,KAAKA,CAAA,EAAG;IACNhB,cAAc,CAACiB,gBAAgB,CAACP,eAAe,CAAC,CAACQ,IAAI,CAAEC,QAAa,IAAK;MACvE,IAAIC,YAAY;MAChB,IAAItB,QAAQ,CAACuB,EAAE,KAAK,KAAK,EAAE;QACzBD,YAAY,GAAGD,QAAQ;QACvBC,YAAY,CAACP,IAAI,GAAGO,YAAY,CAACE,QAAQ;MAC3C,CAAC,MAAM;QACLF,YAAY,GAAGD,QAAQ,CAACI,IAAI;MAC9B;MACA,IAAI,CAACC,mBAAmB,CAAC,gBAAgB,EAAE,CAAC,IAAI,EAAE,IAAI,CAACC,KAAK,EAAEL,YAAY,CAAC,CAAC;MAE5E,IAAI,CAACM,WAAW,CAAC;QACbX,KAAK,EAAE;UACPY,aAAa,EAAEP;QACjB;MACF,CAAC,EAAuB,IAAI,CAACI,mBAAmB,CAACI,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,IAAI,EAAE,IAAI,CAACH,KAAK,EAAEL,YAAY,CAAC,CAAC,CAAC;IAC5G,CAAC,CAAC;EACJ;EAEAS,YAAYA,CAACd,KAAwB,EAAE;IACrC,oBAAOlB,KAAA,CAAAiC,aAAA,CAAC/B,IAAI;MAACgC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC;IAAK,GAClC,IAAI,CAACC,WAAW,eACjBrC,KAAA,CAAAiC,aAAA,CAACzB,QAAQ;MAAC8B,kBAAkB,EAAEpB,KAAK,CAACoB,kBAAkB,IAAIpB,KAAK,CAACqB,OAAQ;MAACC,IAAI,EAAItB,KAAK,CAACsB,IAAK;MAACC,EAAE,EAAE,IAAI,CAACC,SAAS,CAAC,CAAE;MAACC,SAAS,EAAEzB,KAAK,CAACyB,SAAU;MAACJ,OAAO,EAAErB,KAAK,CAACqB,OAAQ;MAACJ,MAAM,EAAE,IAAI,CAACA,MAAM,CAACS,MAAO;MAACC,QAAQ,EAAE3B,KAAK,CAAC2B,QAAS;MAAC1B,KAAK,EAAE,IAAI,CAACA,KAAK,CAACY,IAAI,CAAC,IAAI;IAAE,CAAW,CACjQ,CAAC;EACT;AACF"}