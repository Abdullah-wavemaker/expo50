{"version":3,"names":["React","View","DatePickerModalContent","TimePickerModal","ModalConsumer","ThemeVariables","DatePickerProps","constructor","_defineProperty","Date","DatePickerState","styles","root","text","modal","content","backgroundColor","INSTANCE","datepickerBgColor","DatePickerComponnent","Component","props","state","showDatePicker","mode","showTimePicker","value","modalOptions","prepareModalOptions","o","modalStyle","centered","onDateChange","date","modalService","old","setHours","getHours","setMinutes","getMinutes","setState","close","refresh","onTimeChange","hours","minutes","timemodal","prepareTimeModal","_this$props$value","_this$props$value2","createElement","style","height","marginTop","visible","onDismiss","onConfirm","params","hideModal","render","showModal","validRange","startDate","minimumDate","endDate","maximumDate","locale"],"sources":["date-picker.component.tsx"],"sourcesContent":["import React, { ReactNode } from 'react';\nimport { View } from 'react-native';\nimport { DatePickerModalContent, TimePickerModal } from 'react-native-paper-dates';\nimport { BaseStyles } from '@wavemaker/app-rn-runtime/core/base.component';\nimport { AllStyle } from '@wavemaker/app-rn-runtime/styles/theme';\nimport { ModalConsumer, ModalService, ModalOptions } from '@wavemaker/app-rn-runtime/core/modal.service';\nimport ThemeVariables from '@wavemaker/app-rn-runtime/styles/theme.variables';\n\nexport class DatePickerProps {\n    mode?: 'date' | 'time' | 'datetime' | string = 'datetime';\n    value?: Date = new Date();\n    minimumDate?: Date = null as any;\n    maximumDate?: Date = null as any;\n    onDateChange?: Function = null as any;\n    onDismiss?: Function = null as any;\n    locale: string = '';\n}\n\nexport class DatePickerState {\n    public value?: Date = null as any;\n    public modalOptions: ModalOptions = {} as any;\n    public showDatePicker = false;\n    public showTimePicker = false;\n}\n\ntype DatePickerStyles = BaseStyles & {\n    modal: AllStyle,\n    content: AllStyle\n};\n\nconst styles: DatePickerStyles = {\n    root: {},\n    text: {},\n    modal: {},\n    content: {\n        backgroundColor: ThemeVariables.INSTANCE.datepickerBgColor\n    }\n};\n\nexport default class DatePickerComponnent extends React.Component<DatePickerProps, DatePickerState, any> {\n    timemodal = null as any;\n    constructor(props: DatePickerProps) {\n        super(props);\n        this.state = {\n            showDatePicker: this.props.mode !== 'time',\n            showTimePicker: this.props.mode === 'time',\n            value: props.value,\n            modalOptions: {}\n        } as DatePickerState;\n    }\n\n    prepareModalOptions(content: ReactNode) {\n        const o = this.state.modalOptions;\n        o.content = content;\n        o.modalStyle = styles.modal;\n        o.centered = true;\n        return o;\n    }\n\n    public onDateChange(date: Date | undefined, modalService: ModalService) {\n        const old = this.state.value;\n        if (old && date) {\n            date.setHours(old.getHours());\n            date.setMinutes(old.getMinutes());\n        }\n        if (this.props.mode === 'date') {\n            this.setState({\n                value : date,\n                showDatePicker: false,\n                showTimePicker: false\n            }, () => {\n                this.props.onDateChange && this.props.onDateChange(this.state.value);\n                this.close(modalService);\n            });\n        } else if (date) {\n            this.setState({\n                value : date,\n                showDatePicker: false,\n                showTimePicker: true\n            }, () => {\n                modalService.refresh();\n            });\n        }\n    }\n\n    public onTimeChange(hours: number, minutes: number, modalService: ModalService) {\n        const date = this.state.value || new Date();\n        date.setHours(hours);\n        date.setMinutes(minutes);\n        this.setState({\n            value : date,\n            showDatePicker: false,\n            showTimePicker: false\n        }, () => {\n            this.props.onDateChange && this.props.onDateChange(this.state.value);\n            this.timemodal = null;\n            this.close(modalService);\n        });\n    }\n\n    prepareTimeModal(modalService: ModalService) {\n        if (!this.timemodal) {\n            this.timemodal = (\n            <View style={{height: 600, marginTop: 600}}>\n                {\n                    React.createElement(TimePickerModal, {\n                        hours : this.props.value?.getHours() || 0,\n                        minutes : this.props.value?.getMinutes() || 0,\n                        visible : true,\n                        onDismiss : () => this.close(modalService),\n                        onConfirm: (params) => {\n                            this.onTimeChange(params.hours, params.minutes, modalService);\n                        }\n                    })\n                }\n            </View>);\n        }\n        return this.timemodal;\n    }\n\n    close(modalService: ModalService) {\n        modalService.hideModal(this.state.modalOptions);\n        this.props.onDismiss && this.props.onDismiss();\n    }\n\n    render() {\n        return (this.state.showDatePicker || this.state.showTimePicker) ? (\n        <ModalConsumer>\n            {(modalService: ModalService) => {\n                modalService.showModal(this.prepareModalOptions(\n                    (<View style={this.state.showDatePicker ? styles.content: {}}>\n                        {this.state.showDatePicker && \n                            React.createElement(DatePickerModalContent, {\n                                mode: \"single\",\n                                date: this.props.value,\n                                onDismiss: () => this.close(modalService),\n                                onConfirm: (params) => this.onDateChange(params.date, modalService),\n                                validRange: {\n                                    startDate: this.props.minimumDate,\n                                    endDate: this.props.maximumDate\n                                },\n                                locale: this.props.locale})}\n                        {this.state.showTimePicker && this.prepareTimeModal(modalService)}\n                    </View>)\n                ));\n                return null;\n            }}\n        </ModalConsumer>): null;\n    }\n}\n"],"mappings":"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"}