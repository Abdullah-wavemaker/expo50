{"version":3,"names":["React","View","Text","TouchableOpacity","WmRadiosetProps","DEFAULT_CLASS","BaseDatasetComponent","BaseDatasetState","WmIcon","find","isEqual","isEmpty","WmRadiosetState","constructor","arguments","_defineProperty","WmRadioset","props","onPress","item","invokeEventCallback","proxy","state","disabled","readonly","selected","selectedValue","selectedItem","dataItems","d","key","oldValue","datavalue","datafield","validate","updateState","computeDisplayValue","undefined","renderChild","index","colWidth","displayText","displayexp","displayfield","value","getItemKey","createElement","_extends","style","styles","width","bind","getTestPropsForAction","getTestProps","iconclass","checkedRadio","uncheckedRadio","accessibilitylabel","template","renderitempartial","dataObject","radioLabel","getTestPropsForLabel","setTemplate","partialName","renderGroupby","groupedData","accessibilityRole","length","map","groupObj","groupHeaderTitle","renderRadioButtons","data","items","noOfColumns","itemsperrow","xs","Math","round","group","renderWidget","root","groupby"],"sources":["radioset.component.tsx"],"sourcesContent":["import React from 'react';\nimport { View, Text, DimensionValue, TouchableOpacity } from 'react-native';\nimport { RadioButton } from 'react-native-paper';\n\nimport WmRadiosetProps from './radioset.props';\nimport { DEFAULT_CLASS, WmRadiosetStyles } from './radioset.styles';\nimport {\n  BaseDatasetComponent,\n  BaseDatasetState\n} from '@wavemaker/app-rn-runtime/components/input/basedataset/basedataset.component';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport WmSkeleton, { createSkeleton } from '../../basic/skeleton/skeleton.component';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \nimport { find, forEach, isEqual } from 'lodash-es';\nimport { isEmpty } from 'lodash';\n\nexport class WmRadiosetState extends BaseDatasetState<WmRadiosetProps> {\n  template: string = '';\n}\n\nexport default class WmRadioset extends BaseDatasetComponent<WmRadiosetProps, WmRadiosetState, WmRadiosetStyles> {\n\n  constructor(props: WmRadiosetProps) {\n    super(props, DEFAULT_CLASS, new WmRadiosetProps());\n  }\n\n  onPress(item: any) {\n    this.invokeEventCallback('onTap', [null, this.proxy]);\n    if (this.state.props.disabled || this.state.props.readonly) {\n      return;\n    }\n    item.selected = true;\n    let selectedValue: any = \"\";\n    const selectedItem = find(this.state.dataItems, d => isEqual(d.key, item.key));\n    const oldValue = this.state.props.datavalue;\n    selectedItem.selected = item.selected;\n    selectedValue = selectedItem.selected ? selectedItem.datafield : null;\n    this.validate(selectedValue);\n    this.updateState({ props: { datavalue: selectedValue }} as WmRadiosetState,() => {\n      this.computeDisplayValue();\n      this.invokeEventCallback('onChange', [ undefined, this.proxy, selectedValue, oldValue ]);\n    });\n  }\n  \n  renderChild(item: any, index: any, colWidth: DimensionValue) {\n    const displayText = item.displayexp || item.displayfield;\n    const value = this.state.props.datafield === 'All Fields' ? this.getItemKey(item.datafield) : item.datafield;\n    return (\n      <TouchableOpacity style={[\n        this.styles.item,\n        item.selected ? this.styles.selectedItem : null,\n        {width: colWidth}]} onPress={this.onPress.bind(this, item)} key={item.key} {...this.getTestPropsForAction()}>\n          <WmIcon {...this.getTestProps('' + index)} iconclass=\"wi wi-fiber-manual-record\" styles={item.selected ? this.styles.checkedRadio : this.styles.uncheckedRadio} disabled={this.state.props.readonly || this.state.props.disabled} accessibilitylabel={`Radio button for ${displayText}`}></WmIcon>\n          {!isEmpty(this.state.template) && this.props.renderitempartial ?\n          this.props.renderitempartial(item.dataObject, index, this.state.template) : <Text style={this.styles.radioLabel} {...this.getTestPropsForLabel('caption')}>{displayText}</Text>}\n      </TouchableOpacity>)\n  }\n\n  setTemplate(partialName: any) {\n    this.updateState({ template: partialName } as WmRadiosetState);\n  }\n\n  renderGroupby() {\n    const groupedData = this.state.groupedData;\n    return (\n      <View accessibilityRole='radiogroup'>\n        {groupedData && groupedData.length\n          ? groupedData.map((groupObj: any, index: any) => {\n            return(\n              <View key={groupObj.key}>\n                <Text style={this.styles.groupHeaderTitle}>{groupObj.key}</Text>\n                {this.renderRadioButtons(groupObj.data)}\n              </View>)\n          })\n          : null}\n      </View>\n    );\n  }\n\n  renderRadioButtons(items: any) {\n    const props = this.state.props;\n    const noOfColumns = props.itemsperrow.xs || 1;\n    const colWidth = Math.round(100/ noOfColumns) + '%' as DimensionValue;\n    return(\n      <View style={this.styles.group}>\n        {items && items.length ?\n          items.map((item: any, index: any) => this.renderChild(item, index, colWidth)): null}\n      </View>)\n  }\n\n  renderWidget(props: WmRadiosetProps) {\n    const items = this.state.dataItems;\n    return (\n        <View style={this.styles.root}>\n          {props.groupby && this.renderGroupby()}\n          {!props.groupby && this.renderRadioButtons(items)}\n        </View>\n    );\n  }\n}\n"],"mappings":"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"}