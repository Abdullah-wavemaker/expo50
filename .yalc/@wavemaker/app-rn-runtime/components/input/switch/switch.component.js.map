{"version":3,"names":["React","Text","View","isEqual","find","WmSwitchProps","DEFAULT_CLASS","WmIcon","BaseDatasetComponent","BaseDatasetState","Tappable","AccessibilityWidgetType","getAccessibilityProps","WmSwitchState","WmSwitch","constructor","props","onChange","value","oldVal","state","datavalue","validate","datafield","selectedItem","dataItems","item","key","dataObject","updateState","isDefault","invokeEvent","invokeEventCallback","undefined","proxy","onTap","event","getItemKey","renderChild","index","btnClass","length","displayText","displayexp","displayfield","isSelected","createElement","_extends","getTestPropsForAction","SWITCH","selected","disabled","bind","styles","button","selectedButton","iconclass","id","getTestId","loadingIcon","icon","caption","getTestPropsForLabel","style","text","color","renderWidget","items","root","map"],"sources":["switch.component.tsx"],"sourcesContent":["import React from 'react';\nimport {Text, View} from \"react-native\";\nimport { isEqual, find } from 'lodash';\n\nimport WmSwitchProps from './switch.props';\nimport { DEFAULT_CLASS, WmSwitchStyles } from './switch.styles';\nimport WmIcon from '@wavemaker/app-rn-runtime/components/basic/icon/icon.component';\nimport { BaseDatasetComponent, BaseDatasetState } from '../basedataset/basedataset.component';\nimport { Tappable } from '@wavemaker/app-rn-runtime/core/tappable.component';\nimport { AccessibilityWidgetType, getAccessibilityProps } from '@wavemaker/app-rn-runtime/core/accessibility'; \n\nexport class WmSwitchState extends BaseDatasetState<WmSwitchProps> {}\n\nexport default class WmSwitch extends BaseDatasetComponent<WmSwitchProps, WmSwitchState, WmSwitchStyles> {\n  constructor(props: WmSwitchProps) {\n    super(props, DEFAULT_CLASS, new WmSwitchProps());\n  }\n\n  onChange(value: any) {\n    if (!value) {\n      return;\n    }\n    const oldVal = this.state.props.datavalue;\n    this.validate(value);\n    if (value === oldVal) {\n      return;\n    }\n    if (this.state.props.datafield === 'All Fields') {\n      const selectedItem = find(this.state.dataItems, (item) => isEqual(item.key, value));\n      value = selectedItem && selectedItem.dataObject;\n    }\n    // @ts-ignore\n    this.updateState({props: {datavalue: value}, isDefault: false},\n      () => {\n      if (!this.props.invokeEvent) {\n        this.invokeEventCallback('onChange', [undefined, this.proxy, value, oldVal]);\n      }\n      });\n  }\n\n  onTap(event: any, item: any) {\n    const value = this.state.props.datafield === 'All Fields' ? this.getItemKey(item.datafield) : item.datafield;\n    this.onChange(value);\n    this.invokeEventCallback('onTap', [ event, this.proxy ]);\n  }\n\n  renderChild(item: any, index: any) {\n    let btnClass = 'button';\n    const props = this.state.props;\n    if(index === 0) {\n      btnClass = 'firstButton';\n    } else if (index+1 === this.state.dataItems.length) {\n      btnClass = 'lastButton';\n    }\n    const displayText = item.displayexp || item.displayfield;\n    const isSelected = this.state.props.datafield === 'All Fields' ? isEqual(props.datavalue, item.datafield) : this.state.props.datavalue === item.datafield;\n    return (\n      <Tappable \n        {...this.getTestPropsForAction(index + '')}\n        {...getAccessibilityProps(AccessibilityWidgetType.SWITCH, {...this.state.props, selected: isSelected})}\n        onTap={this.state.props.disabled ? undefined : this.onTap.bind(this, null, item)}\n        styles={[\n          this.styles.button,\n          this.styles[btnClass],\n          isSelected ? this.styles.selectedButton : null]}\n          key={item.key}>\n        {this.state.props.iconclass ?\n            (<WmIcon \n              id={this.getTestId('icon' + index)}\n              styles={this.styles.loadingIcon}\n              iconclass={item.icon}\n              caption={displayText}></WmIcon>)\n            : (<View>\n                <Text \n                  {...this.getTestPropsForLabel('' + index)}\n                  style={[this.styles.text, \n                    {color: isSelected ? this.styles.selectedButton.color : this.styles.button.color }]}>\n                  {displayText}\n                </Text>\n              </View>)}\n      </Tappable>\n    );\n  };\n\n  renderWidget(props: WmSwitchProps) {\n    const items = this.state.dataItems;\n    return (<View style={this.styles.root}>\n      {items && items.length ?\n        items.map((item: any, index: any) => this.renderChild(item, index)): null}\n    </View>);\n  }\n}\n"],"mappings":"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"}