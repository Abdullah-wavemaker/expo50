{"version":3,"names":["React","View","ThemeProvider","FixedViewContext","createContext","FixedView","Component","constructor","props","_defineProperty","counter","componentWillUnmount","container","remove","render","cachedComponent","usememo","createElement","Consumer","show","add","value","theme","key","id","style","position","children","Fragment","Date","now","FixedViewContainer","arguments","Map","c","n","set","setTimeout","setState","delete","Provider","Array","from","values"],"sources":["fixed-view.component.tsx"],"sourcesContent":["\nimport React from \"react\";\nimport { View, ViewStyle } from \"react-native\";\nimport { Theme, ThemeProvider } from \"../styles/theme\";\n\nconst FixedViewContext = React.createContext<FixedViewContainer>(null as any);\n\nexport interface FixedViewProps {\n    style?: ViewStyle,\n    show?: boolean;\n    theme: Theme;\n    usememo?: boolean;\n    children?: any;\n}\n\nexport class FixedView extends React.Component<FixedViewProps> {\n    static defaultProps = {\n        show: true\n    };\n    static counter = Date.now();\n    container: FixedViewContainer = null as any;\n    cachedComponent: React.ReactNode;\n    id = FixedView.counter++;\n\n    constructor(props: FixedViewProps) {\n        super(props);\n    }\n\n    componentWillUnmount() {\n        this.container.remove(this);\n    }\n\n    render() {\n        this.cachedComponent = (this.props.usememo === true && this.cachedComponent ) || (<FixedViewContext.Consumer>\n            {(container) => {\n                this.container = container;\n                if (this.props.show) {\n                    container.add(this, (\n                        <ThemeProvider value={this.props.theme} key={this.id}>\n                            <View style={[\n                                {position: 'absolute'},\n                                this.props.style]}>\n                                {this.props.children}\n                            </View>\n                        </ThemeProvider>\n                    ));\n                } else {\n                    container.remove(this);\n                }\n                return <></>;\n            }}\n        </FixedViewContext.Consumer>);\n        return this.cachedComponent;\n    }\n}\n\nexport class FixedViewContainer extends React.Component {\n    children: Map<FixedView, React.ReactNode> = new Map();\n    id = 0;\n\n    add(c: FixedView, n : React.ReactNode) {\n        this.children.set(c, n);\n        setTimeout(() => this.setState({id: ++this.id}));\n    }\n\n    remove(c: FixedView) {\n        this.children.delete(c);\n        setTimeout(() => this.setState({id: ++this.id}));\n    }\n\n    render() {\n        return (\n            <FixedViewContext.Provider value={this}>\n                {(this.props as any).children}\n                {Array.from(this.children.values())}\n            </FixedViewContext.Provider>\n        ) ;\n    }\n};"],"mappings":"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"}