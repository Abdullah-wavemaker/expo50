{"version":3,"names":["assign","isUndefined","isNil","React","AccessibilityInfo","Platform","Animatable","ThemeVariables","StyleProps","getStyleName","BackgroundComponent","injector","ROOT_LOGGER","deepCopy","BASE_THEME","ThemeConsumer","ThemeEvent","EventNotifier","PropsProvider","assignIn","HideMode","AssetConsumer","FixedView","TextIdPrefixConsumer","isScreenReaderEnabled","WIDGET_LOGGER","extend","ParentContext","createContext","BaseComponentState","constructor","_defineProperty","undefined","defineStyles","styles","text","fontFamily","INSTANCE","baseFont","userSelect","BaseProps","arguments","BaseComponent","Component","markupProps","defaultClass","defaultProps","defaultState","ADD_TO_DOM","createElement","Fragment","I18nService","get","state","notifier","name","props","propertyProvider","show","$new","$old","debug","initialized","styleName","styleOverrides","setTimeout","cleanRefresh","onPropertyChange","_showView","deferload","check","proxy","Proxy","target","prop","receiver","propName","toString","has","Reflect","set","value","updateState","cleanup","push","updateStateTimeouts","forEach","v","clearTimeout","theme","subscribe","CHANGE","forceUpdate","addEventListener","remove","destroyParentListeners","event","fn","notify","args","isRTL","i18nService","isRTLLocale","animate","setState","animationId","Date","now","animatableProps","setProp","setPropDefault","setDefault","getDefaultStyles","getStyle","reset","newPartialState","callback","destroyed","stateFn","oldState","oldProps","newState","Object","keys","k","onUpdateState","_this$props$listener","_this$props$listener2","listener","onComponentChange","timeoutId","splice","indexOf","shouldComponentUpdate","nextProps","nextState","nextContext","key","componentDidMount","onComponentInit","componentWillAttach","isFixed","hide","componentWillDetach","componentWillUnmount","onComponentDestroy","f","destroy","componentDidUpdate","prevProps","prevState","snapshot","invokeEventCallback","eventName","callBack","map","a","apply","e","console","error","showView","isVisible","refresh","renderSkeleton","parentListenerDestroyers","setParent","parent","copyStyles","property","from","to","renderFixedContainer","style","rootStyle","left","top","bottom","right","width","height","root","mergeStyle","addAnimation","renderWidget","n","View","_extends","setBackground","bgStyle","_background","image","backgroundImage","position","backgroundPosition","size","backgroundSize","repeat","backgroundRepeat","resizeMode","backgroundResizeMode","borderRadius","getTestId","suffix","id","testIdPrefix","getTestProps","OS","accessibilityLabel","testID","accessible","getStyleClassName","classname","getTestPropsForInput","getTestPropsForAction","getTestPropsForLabel","getDependenciesFromContext","loadAsset","Consumer","_this$parent","_showSkeleton","showskeleton","Provider","render","selectedLocale","getSelectedLocale","info","hideMode","DONOT_ADD_TO_DOM","disabled","showindevice","d","join","hasOwnProperty","backgroundColor","eleToRender"],"sources":["base.component.tsx"],"sourcesContent":["import { assign, isUndefined, isNil } from 'lodash';\nimport React, { ReactNode } from 'react';\nimport { AccessibilityInfo, Platform, TextStyle, ViewStyle } from 'react-native';\nimport { AnimatableProperties } from 'react-native-animatable';\nimport * as Animatable from 'react-native-animatable';\nimport ThemeVariables from '@wavemaker/app-rn-runtime/styles/theme.variables';\nimport { StyleProps, getStyleName } from '@wavemaker/app-rn-runtime/styles/style-props';\nimport { BackgroundComponent } from '@wavemaker/app-rn-runtime/styles/background.component';\nimport injector from '@wavemaker/app-rn-runtime/core/injector';\nimport { ROOT_LOGGER } from '@wavemaker/app-rn-runtime/core/logger';\nimport { deepCopy } from '@wavemaker/app-rn-runtime/core/utils';\nimport BASE_THEME, { NamedStyles, AllStyle, ThemeConsumer, ThemeEvent, Theme } from '../styles/theme';\nimport EventNotifier from './event-notifier';\nimport { PropsProvider } from './props.provider';\nimport { assignIn } from 'lodash-es';\nimport { HideMode } from './if.component';\nimport { AssetConsumer } from './asset.provider';\nimport { FixedView } from './fixed-view.component';\nimport { TextIdPrefixConsumer } from './testid.provider';\nimport { isScreenReaderEnabled } from './accessibility';\n\nexport const WIDGET_LOGGER = ROOT_LOGGER.extend('widget');\n\nexport const ParentContext = React.createContext(null as any);\n\nexport class BaseComponentState<T extends BaseProps> {\n    public animationId?: number = 0;\n    public animatableProps?: AnimatableProperties<ViewStyle> = undefined;\n    public props = {} as T;\n    public hide? = false;\n}\n\nexport type BaseStyles = NamedStyles<any> & {\n    root: AllStyle,\n    text: TextStyle & {userSelect?: 'none'| 'text'}\n}\n\nexport function defineStyles<T>(styles: T): T {\n    return deepCopy({\n        text: {\n            fontFamily: ThemeVariables.INSTANCE.baseFont,\n            userSelect: 'text'\n        }\n    }, styles);\n}\n\nexport interface LifecycleListener {\n    onComponentChange?: (c: BaseComponent<any, any, any>) => void;\n    onComponentInit?: (c: BaseComponent<any, any, any>) => void;\n    onComponentDestroy?: (c: BaseComponent<any, any, any>) => void;\n}\n\nexport class BaseProps extends StyleProps {\n    id?: string = null as any;\n    name?: string = null as any;\n    key?: any = null as any;\n    disabled? = false;\n    show? = true as Boolean | String | Number;\n    styles?: any = null;\n    classname?: string = null as any;\n    listener?: LifecycleListener = null as any;\n    showindevice?: ('xs'|'sm'|'md'|'lg'|'xl'|'xxl')[] = null as any;\n    showskeleton?: boolean = false;\n    deferload?: boolean = false;\n}\n\nexport abstract class BaseComponent<T extends BaseProps, S extends BaseComponentState<T>, L extends BaseStyles> extends React.Component<T, S> {\n    public styles: L = null as any;\n    public hideMode = HideMode.ADD_TO_DOM;\n    private propertyProvider: PropsProvider<T>;\n    public proxy: BaseComponent<T, S, L>;\n    public initialized = false;\n    public cleanup = [] as Function[];\n    public theme = BASE_THEME;\n    public updateStateTimeouts= [] as NodeJS.Timeout[];\n    public parent: BaseComponent<any, any, any> = null as any;\n    public destroyed = false;\n    public _showSkeleton = false;\n    public isFixed = false;\n    private notifier = new EventNotifier();\n    private parentListenerDestroyers = [] as Function[];\n    public _background = <></>;\n    private styleOverrides = {} as any;\n    public loadAsset: (path: string) => number | string = null as any;\n    private i18nService = injector.I18nService.get();\n    public testIdPrefix = '';\n    private _showView = true;\n\n    constructor(markupProps: T, public defaultClass: string, defaultProps?: T, defaultState?: S) {\n        super(markupProps);\n        this.state = (defaultState || {} as S);\n        this.notifier.name = this.props.name || '';\n        this.propertyProvider = new PropsProvider<T>(\n            assign({show: true}, defaultProps),\n            assign({}, markupProps),\n            (name: string, $new: any, $old: any) => {\n                WIDGET_LOGGER.debug(() => `${this.props.name || this.constructor.name}: ${name} changed from ${$old} to ${$new}`);\n                if (this.initialized) {\n                    const styleName = getStyleName(name);\n                    if (styleName) {\n                        if ($new === undefined) {\n                            delete this.styleOverrides[styleName];\n                        } else {\n                            this.styleOverrides[styleName] = $new;\n                        }\n                    }\n                }\n                if (name === 'showskeleton' && this.initialized) {\n                    setTimeout(() => this.cleanRefresh(), 100);\n                }\n                this.onPropertyChange(name, $new, $old);\n            });\n        //@ts-ignore\n        this.state.props =this.propertyProvider.get();\n        //@ts-ignore\n        this._showView = !this.props.deferload;\n        this.propertyProvider.check();\n        //@ts-ignore\n        this.proxy = (new Proxy(this, {\n            get: (target, prop, receiver): any => {\n                const propName = prop.toString();\n                if (this.propertyProvider.has(propName)) {\n                    //@ts-ignore\n                    return this.state.props[propName];\n                }\n                return Reflect.get(target, prop, receiver);\n            },\n            set: (target: any, prop, value: any): any => {\n                const propName = prop.toString();\n                if (this.propertyProvider.has(propName)) {\n                    // @ts-ignore\n                    const props = {} as any;\n                    props[propName] = value;\n                    this.updateState({\n                        props: props\n                    } as S);\n                    return true;\n                } else {\n                    return Reflect.set(target, prop, value);\n                }\n            }\n        }));\n        this.cleanup.push(() => {\n            this.updateStateTimeouts.forEach(v => clearTimeout(v));\n        });\n        this.cleanup.push(this.theme.subscribe(ThemeEvent.CHANGE, () => {\n            this.forceUpdate();\n        }));\n        this.cleanup.push(AccessibilityInfo.addEventListener('screenReaderChanged',\n            () => {\n              setTimeout(() => {\n                this.forceUpdate();\n              }, 100);\n            },\n        ).remove);\n        this.cleanup.push(() => {\n            this.destroyParentListeners();\n        });\n    }\n\n    public subscribe(event: string, fn: Function) {\n        return this.notifier.subscribe(event, fn);\n    }\n\n    public notify(event: string, args: any[]) {\n        return this.notifier.notify(event, args);\n    }\n\n    public get isRTL(){\n        return this.i18nService.isRTLLocale();\n    }\n\n    public animate(props: AnimatableProperties<ViewStyle>) {\n        this.setState({\n            animationId: Date.now(),\n            animatableProps: props\n        });\n    }\n\n    setProp(propName: string, value: any) {\n        this.propertyProvider.set(propName, value);\n        this.updateState({props:{}} as S);\n    }\n\n    setPropDefault(propName: string, value: any) {\n        this.propertyProvider.setDefault(propName, value);\n    }\n    \n    onPropertyChange(name: string, $new: any, $old: any) {        \n    }\n     \n    getDefaultStyles() {\n        return this.theme.getStyle(this.defaultClass);\n    }\n\n    reset() {\n\n    }\n\n    updateState(newPartialState: S, callback?: ()=>void) {\n        if (this.destroyed) {\n            return;\n        }\n        const stateFn = (oldState: S) => {\n            const oldProps = oldState.props;\n            const newState = this.initialized ? assignIn({}, oldState, newPartialState) : assignIn(oldState, newPartialState);\n            if (newPartialState.props) {\n                Object.keys(newPartialState.props).forEach((k) => {\n                    //@ts-ignore\n                    oldProps[k] = newState.props[k];\n                });\n            newState.props = oldProps;\n            }\n            return newState;\n        };\n        const onUpdateState = () => {\n            callback && callback();\n            this.props.listener?.onComponentChange\n                && this.props.listener?.onComponentChange(this);\n        }\n        if (!this.initialized) {\n            this.state = stateFn(this.state);\n            onUpdateState();\n        } else {\n            const timeoutId = setTimeout(() => {\n                this.setState(stateFn, onUpdateState);\n                this.updateStateTimeouts.splice(this.updateStateTimeouts.indexOf(timeoutId), 1);\n            });\n            this.updateStateTimeouts.push(timeoutId);\n        }\n    }\n\n    shouldComponentUpdate(nextProps: T, nextState: S, nextContext: any) {\n        if (this.propertyProvider.check(nextProps)) {\n            return true;\n        }\n        for(let key in nextState) {\n            if(key !== 'props' && (!(key in this.state) || nextState[key] !== this.state[key])) {\n                return true;\n            }\n        }\n\n        for(let key in this.state) {\n            if(key !== 'props' && (!(key in nextState) || this.state[key] !== nextState[key])) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    componentDidMount() {\n        if (this.props.listener && this.props.listener.onComponentInit) {\n            this.props.listener.onComponentInit(this.proxy);\n        }\n        this.initialized = true;\n    }\n\n    componentWillAttach() {\n        if (this.isFixed) {\n            this.setState({hide: false});\n        }\n    }\n\n    componentWillDetach() {\n        if (this.isFixed) {\n            this.setState({hide: true});\n        }\n    }\n\n    componentWillUnmount() {\n        this.destroyed = true;\n        if (this.props.listener && this.props.listener.onComponentDestroy) {\n            this.props.listener.onComponentDestroy(this.proxy);\n        }\n        this.cleanup.forEach(f => f && f());\n        this.notifier.destroy();\n        this.notifier.notify('destroy', []);\n    }\n    \n    componentDidUpdate(prevProps: Readonly<T>, prevState: Readonly<S>, snapshot?: any): void {\n        if (this.propertyProvider.check(this.props)) {\n            this.forceUpdate();\n        }\n    }\n\n    invokeEventCallback(eventName: string, args: any[]) {\n        //@ts-ignore\n        const callBack: Function = this.props[eventName];\n        args = args && args.map(a => (a === this) ? this.proxy : a)\n        if (callBack) {\n            try {\n              return callBack.apply(this.proxy, args);\n            } catch(e) {\n                console.error(e);\n            }\n        }\n    }\n\n    showView() {\n        return this.isVisible();\n    }\n\n    isVisible() {\n        const show = this.state.props.show;\n        return show !== false && show !== 'false' && show !== '0' && !isNil(show);\n    }\n\n    protected abstract renderWidget(props: T): ReactNode;\n\n    public refresh() {\n        this.forceUpdate();\n    }\n\n    public cleanRefresh() {\n        this.forceUpdate(() => this.notifier.notify('forceUpdate', []));\n    }\n    \n    public renderSkeleton (props: T): ReactNode {\n        return null;\n    }\n\n    public destroyParentListeners() {\n        this.parentListenerDestroyers.map(fn => fn());\n    }\n\n    private setParent(parent: BaseComponent<any, any, any>) {\n        if (parent && this.parent !== parent)  {\n            this.parent = parent;\n            this.notifier.setParent(parent.notifier);\n            this.parentListenerDestroyers = [\n                this.parent.subscribe('forceUpdate', () => {\n                    this.cleanRefresh();\n                }),\n                this.parent.subscribe('destroy', () => {\n                    this.destroyParentListeners();\n                })\n            ];\n        }\n    }\n\n    copyStyles(property: string, from: any, to: any) {\n        if (!isUndefined(from[property])) {\n        to[property] = from[property];\n        }\n    }\n\n    renderFixedContainer(props: T) {\n        const style = {} as ViewStyle;\n        const rootStyle = {\n            left: 0,\n            top: 0,\n            bottom: 0,\n            right: 0,\n            width: \"100%\",\n            height: \"100%\"\n        } as ViewStyle;\n        this.copyStyles('left', this.styles.root, style);\n        this.copyStyles('top', this.styles.root, style);\n        this.copyStyles('right', this.styles.root, style);\n        this.copyStyles('bottom', this.styles.root, style);\n        this.copyStyles('width', this.styles.root, style);\n        this.copyStyles('height', this.styles.root, style);\n        this.styles = this.theme.mergeStyle(this.styles, {root: rootStyle});\n        return (<FixedView style={style} theme={this.theme}>{this.addAnimation(this.renderWidget(props))}</FixedView>);\n    }\n\n    private addAnimation(n: ReactNode) {\n        if (!this.state.animatableProps) {\n            return n;\n        }\n        return (<Animatable.View key={this.state.animationId} {...this.state.animatableProps}>{n}</Animatable.View>);\n    }\n    \n    private setBackground() {\n        const bgStyle = this.styles.root as any;\n        this._background = (\n            <BackgroundComponent \n                image={bgStyle.backgroundImage}\n                position={bgStyle.backgroundPosition}\n                size={bgStyle.backgroundSize}\n                repeat={bgStyle.backgroundRepeat}\n                resizeMode={bgStyle.backgroundResizeMode}\n                style={{borderRadius: this.styles.root.borderRadius}}>\n            </BackgroundComponent>\n        );\n        delete (this.styles.root as any)['backgroundImage'];\n        delete (this.styles.root as any)['backgroundPosition'];\n        delete (this.styles.root as any)['backgroundResizeMode'];\n        delete (this.styles.root as any)['backgroundSize'];\n        delete (this.styles.root as any)['backgroundRepeat'];\n    }\n\n    public getTestId(suffix?: string) {\n        let id = this.props.id || this.props.name;\n        if (this.testIdPrefix) {\n            id = this.testIdPrefix + '_' + id;\n        }\n        if (suffix) {\n            id = id + '_' + suffix;\n        }\n        return id;\n    }\n\n    public getTestProps(suffix?: string) {\n        let id = this.getTestId(suffix);\n        if (isScreenReaderEnabled()) {\n            return {};\n        }\n        if (Platform.OS === 'android' || Platform.OS === 'web') {\n            return {\n                accessibilityLabel: id,\n                testID: id\n            };\n        }\n        return {\n            accessible: false,\n            testID: id\n        };\n    }\n\n    public getStyleClassName() {\n        return this.state.props.classname;\n    }\n\n    public getTestPropsForInput(suffix?: string) {\n        return this.getTestProps(suffix || 'i');\n    }\n\n    public getTestPropsForAction(suffix?: string) {\n        return this.getTestProps(suffix || 'a');\n    }\n\n    public getTestPropsForLabel(suffix?: string) {\n        return this.getTestProps(suffix || 'l');\n    }\n\n    private getDependenciesFromContext(fn: () => ReactNode) {\n        return (\n        <TextIdPrefixConsumer>\n            {(testIdPrefix) => {\n                this.testIdPrefix = testIdPrefix || '';\n                return (<AssetConsumer>\n                    {(loadAsset) => {\n                    this.loadAsset = loadAsset;\n                    return (<ParentContext.Consumer>\n                        {(parent) => {\n                            this.setParent(parent);\n                            this._showSkeleton = this.parent?._showSkeleton \n                                || !!this.state.props.showskeleton;\n                            return (\n                                <ParentContext.Provider value={this}>\n                                    <ThemeConsumer>\n                                        {(theme) => {                                \n                                            this.theme = theme || BASE_THEME;\n                                            return fn();\n                                        }}\n                                    </ThemeConsumer>\n                                </ParentContext.Provider>);\n                        }}    \n                        </ParentContext.Consumer>);\n                    }}\n                </AssetConsumer>);\n            }}\n        </TextIdPrefixConsumer>); \n    }\n      \n    public render(): ReactNode {\n        const props = this.state.props;\n        this.isFixed = false;\n        const selectedLocale = this.i18nService.getSelectedLocale();\n        return this.getDependenciesFromContext(() => {\n            WIDGET_LOGGER.info(() => `${this.props.name || this.constructor.name} is rendering.`);\n            this._showView = this._showView || this.showView();\n            if (this.state.hide \n                || (!this.isVisible() && this.hideMode === HideMode.DONOT_ADD_TO_DOM)\n                || !this._showView) {\n                return null;\n            }\n            const classname = this.getStyleClassName();\n            this.styles =  this.theme.mergeStyle(\n                this.getDefaultStyles(),\n                {text: this.theme.getStyle('app-' + selectedLocale)},\n                {text: this.theme.getStyle(this.defaultClass + '-' + selectedLocale)},\n                props.disabled ? this.theme.getStyle(this.defaultClass + '-disabled') : null,\n                this.isRTL ? this.theme.getStyle(this.defaultClass + '-rtl') : null,\n                classname && this.theme.getStyle(classname),\n                props.showindevice && this.theme.getStyle('d-all-none ' + props.showindevice.map(d => `d-${d}-flex`).join(' ')),\n                this.props.styles,\n                {\n                    root: this.styleOverrides,\n                    text: this.styleOverrides\n                });\n            if (this.styles.root.hasOwnProperty('_background')) {\n                delete this.styles.root.backgroundColor;\n            }\n            if (!this.isVisible()) {\n                assign(this.styles, this.theme.getStyle('hidden'))\n            }\n            let eleToRender = (this._showSkeleton && this.renderSkeleton(props));\n            if (eleToRender) {\n                return eleToRender;\n            }\n            this.setBackground();\n            this.isFixed = (this.styles.root.position as any) === 'fixed';\n            if (this.isFixed) {\n                this.styles.root.position  = undefined;\n                return this.renderFixedContainer(props);\n            }\n            return this.addAnimation(this.renderWidget(this.state.props));        \n        });\n    }\n}\n"],"mappings":"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"}