{"version":3,"names":["AccessibilityInfo","isAndroid","isWebPreviewMode","removeUndefinedKeys","_isScreenReaderEnabled","addEventListener","flag","isScreenReaderEnabled","getScreenReaderStatus","AccessibilityWidgetType","getAccessibilityProps","widgetType","accessibilityProps","props","accessible","BUTTON","TEXT","NUMBER","TEXTAREA","SELECT","CURRENCY","TOGGLE","DATE","LABEL","ANCHOR","MESSAGE","SEARCH","PICTURE","ICON","NAV","POVOVER","WEBVIEW","LINECHART","VIDEO","accessibilityLabel","accessibilitylabel","caption","accessibilityHint","hint","accessibilityRole","accessibilityrole","accessibilityState","disabled","accessibilityLabelledBy","accessibilitylabelledby","accessibilityValue","min","minvalue","max","maxvalue","expanded","selected","CHIPS","RADIOSET","readonly","CHECKBOX","checked","SWITCH","PROGRESSBAR","PROGRESSCIRCLE","finalProps"],"sources":["accessibility.ts"],"sourcesContent":["import { AccessibilityInfo } from 'react-native';\nimport { isAndroid, isWebPreviewMode, removeUndefinedKeys } from './utils';\n\nlet _isScreenReaderEnabled = false;\n\nAccessibilityInfo.addEventListener(\n  'screenReaderChanged',\n  flag => {\n    _isScreenReaderEnabled = flag;\n  },\n);\n\nexport const isScreenReaderEnabled = () => _isScreenReaderEnabled;\n\nasync function getScreenReaderStatus() {\n  _isScreenReaderEnabled = (!isWebPreviewMode() && await AccessibilityInfo.isScreenReaderEnabled());\n}\n\ngetScreenReaderStatus();\n\nexport enum AccessibilityWidgetType {\n  BUTTON = 'button',\n  PICTURE = 'picture',\n  TEXT = 'text',\n  NUMBER = 'number',\n  TEXTAREA = 'textarea',\n  SELECT = 'select',\n  CHIPS = 'chips',\n  CURRENCY = 'currency',\n  RADIOSET = 'radioset',\n  CHECKBOX = 'checkbox',\n  TOGGLE = 'toggle',\n  SWITCH = 'switch',\n  DATE = 'date',\n  VIDEO = 'video',\n  PROGRESSBAR = 'progressbar',\n  PROGRESSCIRCLE = 'progresscircle',\n  LABEL = 'label',\n  ANCHOR = 'anchor',\n  MESSAGE = 'message',\n  SEARCH = 'search',\n  ICON = 'icon',\n  NAV = 'nav',\n  POVOVER = 'popover',\n  WEBVIEW = 'webview',\n  LINECHART = 'linechart',\n};\n\n  \nexport type AccessibilityPropsType = {\n  accessible?: boolean;\n  accessibilityLabel?: string;\n  accessibilityLabelledBy?: string;\n  accessibilityHint?: string;\n  accessibilityRole?: 'button' | 'link' | 'header' | 'search' | 'image' | 'imagebutton' | 'none' | 'summary' | 'text' | 'progressbar' | 'grid' | 'alert';\n  accessibilityState?: {\n    disabled?: boolean;\n    selected?: boolean;\n    checked?: boolean;\n    expanded?: boolean;\n  };\n  accessibilityValue?: {\n    min?: number;\n    max?: number;\n    now?: number;\n    text?: string;\n  };\n  accessibilityActions?: Array<{\n    name: string;\n    label?: string;\n  }>;\n  accessibilityLiveRegion?: 'none' | 'polite' | 'assertive';\n  accessibilityLanguage?: any;\n  accessibilityElementsHidden?: boolean;\n  accessibilityViewIsModal?: boolean;\n};\n  \n\nexport const getAccessibilityProps = (widgetType: AccessibilityWidgetType, accessibilityProps: AccessibilityPropsType | any) => {\n  let props: AccessibilityPropsType = {accessible: true};\n  if (!_isScreenReaderEnabled) {\n    return {};\n  }\n  switch (widgetType) {\n    case AccessibilityWidgetType.BUTTON:\n    case AccessibilityWidgetType.TEXT:\n    case AccessibilityWidgetType.NUMBER:\n    case AccessibilityWidgetType.TEXTAREA:\n    case AccessibilityWidgetType.SELECT:\n    case AccessibilityWidgetType.CURRENCY:\n    case AccessibilityWidgetType.TOGGLE:\n    case AccessibilityWidgetType.DATE:\n    case AccessibilityWidgetType.LABEL:\n    case AccessibilityWidgetType.ANCHOR:\n    case AccessibilityWidgetType.MESSAGE:    \n    case AccessibilityWidgetType.SEARCH: \n    case AccessibilityWidgetType.PICTURE: \n    case AccessibilityWidgetType.ICON:\n    case AccessibilityWidgetType.NAV:\n    case AccessibilityWidgetType.POVOVER:\n    case AccessibilityWidgetType.WEBVIEW:\n    case AccessibilityWidgetType.LINECHART:  \n    case AccessibilityWidgetType.VIDEO: {\n      props.accessibilityLabel = accessibilityProps.accessibilitylabel || accessibilityProps.caption;\n      props.accessibilityHint = accessibilityProps.hint;\n      props.accessibilityRole = accessibilityProps.accessibilityrole;\n\n      if (\n        widgetType === AccessibilityWidgetType.BUTTON ||\n        widgetType === AccessibilityWidgetType.TEXT ||\n        widgetType === AccessibilityWidgetType.NUMBER ||\n        widgetType === AccessibilityWidgetType.TEXTAREA ||\n        widgetType === AccessibilityWidgetType.SELECT ||\n        widgetType === AccessibilityWidgetType.TOGGLE ||\n        widgetType === AccessibilityWidgetType.DATE\n      ) {\n        props.accessibilityState = { disabled: accessibilityProps.disabled };\n      }\n      if (\n        (widgetType === AccessibilityWidgetType.TEXT ||\n          widgetType === AccessibilityWidgetType.NUMBER ||\n          widgetType === AccessibilityWidgetType.TEXTAREA ||\n          widgetType === AccessibilityWidgetType.SELECT ||\n          widgetType === AccessibilityWidgetType.CURRENCY ||\n          widgetType === AccessibilityWidgetType.TOGGLE) &&\n        isAndroid()\n      ) {\n        props.accessibilityLabelledBy =\n          accessibilityProps.accessibilitylabelledby;\n      }\n      if (\n        widgetType === AccessibilityWidgetType.NUMBER ||\n        widgetType === AccessibilityWidgetType.CURRENCY\n      ) {\n        props.accessibilityValue = {\n          min: accessibilityProps.minvalue,\n          max: accessibilityProps.maxvalue,\n        };\n      }\n      if (widgetType === AccessibilityWidgetType.SELECT) {\n        props.accessibilityState = {\n          ...props.accessibilityState,\n          expanded: accessibilityProps.expanded,\n        };\n      }\n      if (widgetType === AccessibilityWidgetType.TOGGLE) {\n        props.accessibilityState = {\n          ...props.accessibilityState,\n          selected: accessibilityProps.selected,\n        };\n      }\n      break;\n    }\n\n    case AccessibilityWidgetType.CHIPS: {\n      props.accessibilityLabel = accessibilityProps.accessibilitylabel || accessibilityProps.caption;\n      props.accessibilityHint = accessibilityProps.hint;\n      props.accessibilityState = {\n        disabled: accessibilityProps.disabled,\n        selected: accessibilityProps.selected,\n      };\n      break;\n    }\n\n    case AccessibilityWidgetType.RADIOSET: {\n      props.accessibilityState = {\n        disabled: accessibilityProps.readonly || accessibilityProps.disabled,\n        selected: accessibilityProps.selected,\n      };\n      break;\n    }\n\n    case AccessibilityWidgetType.CHECKBOX: {\n      props.accessibilityState = {\n        disabled: accessibilityProps.readonly ||  accessibilityProps.disabled,\n        checked: accessibilityProps.checked,\n      };\n      break;\n    }\n\n    case AccessibilityWidgetType.SWITCH: {\n      props.accessibilityState = {\n        disabled: accessibilityProps.disabled,\n        selected: accessibilityProps.selected,\n      };\n      break;\n    }\n    case AccessibilityWidgetType.PROGRESSBAR:\n    case AccessibilityWidgetType.PROGRESSCIRCLE: {\n      props.accessibilityLabel = accessibilityProps.accessibilitylabel || accessibilityProps.caption;\n      props.accessibilityRole = accessibilityProps.accessibilityrole;\n      break;\n    }\n    default:\n      break;\n  }\n\n  const finalProps = removeUndefinedKeys(props);\n  // console.log('finalProps', finalProps)\n\n  return finalProps;\n}\n  "],"mappings":"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"}