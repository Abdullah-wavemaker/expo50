{"version":3,"names":["isNil","React","Animated","Easing","View","RNView","Gesture","GestureDetector","isWebPreviewMode","injector","Handlers","constructor","_defineProperty","Props","undefined","State","Number","MAX_VALUE","Component","props","Pan","Value","I18nService","get","state","isHorizontal","direction","threshold","bounds","touchStart","x","y","active","gesture","maxPointers","minDistance","enabled","enableGestures","onTouchesDown","e","s","changedTouches","onTouchesMove","translationX","allTouches","translationY","d","od","Math","abs","tan","PI","onChange","_this$props$handlers","_this$props$handlers2","handlers","phase","computePhase","center","lower","upper","animationPhase","setValue","position","isRTL","onEnd","_this$props$handlers3","_this$props$handlers4","onAnimation","goToLower","goToUpper","computeMaxScroll","_this$viewLayout2","max","childrenWidth","childrenLayout","reduce","v","width","childrenHeight","height","_this$viewLayout","viewLayout","setState","maxPosition","setChildrenLayout","event","index","nativeEvent","layout","setViewLayout","value","_this$props$handlers5","_this$props$handlers6","i18nService","isRTLLocale","_this$props$handlers7","_this$props$handlers8","setPosition","then","_this$props$handlers9","_this$props$handlers10","onLower","_this$props$handlers11","_this$props$handlers12","_this$props$handlers13","_this$props$handlers14","onUpper","Promise","reject","isNaN","resolve","parallel","timing","useNativeDriver","toValue","duration","easing","out","linear","start","render","createElement","style","flexDirection","flexWrap","alignItems","transform","translateX","translateY","onLayout","bind","children","map","c","i","_this$props$style","key","slideMinWidth","minWidth","slideWidth"],"sources":["swipe.animation.tsx"],"sourcesContent":["import { isNil } from 'lodash-es';\nimport React from  'react';\nimport { Animated, Easing, View as RNView, ViewStyle, LayoutChangeEvent, LayoutRectangle, DimensionValue } from 'react-native';\nimport { Gesture, GestureDetector, GestureUpdateEvent } from 'react-native-gesture-handler';\nimport { isWebPreviewMode } from '@wavemaker/app-rn-runtime/core/utils';\nimport injector from '@wavemaker/app-rn-runtime/core/injector';\n\nexport class Handlers {\n    bounds?: (g: GestureUpdateEvent<any>) => Bounds = null as any;\n    onAnimation?: (g: GestureUpdateEvent<any>) => any = () => {};\n    onLower?:  (g: GestureUpdateEvent<any>) => any = () => {};\n    onUpper?:  (g: GestureUpdateEvent<any>) => any = () => {};\n    computePhase?: (value: number) => number = null as any;\n}\n\nexport interface Bounds {\n    upper?: number;\n    center?: number;\n    lower?: number;\n}\n\nexport class Props {\n    threshold?: number = 30;\n    direction?: 'horizontal' | 'vertical' = 'horizontal';\n    handlers?: Handlers = {} as any;\n    style?: ViewStyle = {} as any;\n    children: any;\n    enableGestures: any;\n    slideWidth?: DimensionValue = '100%'; \n    slideMinWidth?: DimensionValue = undefined;  \n}\n\nexport class State {\n    threshold = 30;\n    isHorizontal = false;\n    bounds: Bounds = {} as any;\n    maxPosition = Number.MAX_VALUE;\n}\n\nexport class View extends React.Component<Props, State> {\n\n    static defaultProps = new Props();\n\n    private gesture = Gesture.Pan();\n    private position = new Animated.Value(0);\n    public animationPhase = new Animated.Value(0);\n    private i18nService = injector.I18nService.get();\n    private childrenLayout: LayoutRectangle[] = [];\n    private viewLayout: LayoutRectangle = null as any;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            isHorizontal:  props.direction === 'horizontal',\n            threshold: props.threshold || 30,\n            bounds: {} as any\n        } as State;\n        var touchStart = {\n            x: 0,\n            y: 0,\n            active: false\n        };\n        this.gesture\n            .maxPointers(1)\n            .minDistance(this.state.threshold)\n            .enabled(this.props.enableGestures && !isWebPreviewMode())\n            .onTouchesDown((e, s) => {\n                touchStart = {\n                    x: e.changedTouches[0].x,\n                    y: e.changedTouches[0].y,\n                    active: false\n                  };\n            })\n            .onTouchesMove((e, s) => {\n                if (touchStart.active) {\n                    return;\n                }\n                const translationX = e.allTouches[0].x - touchStart.x;\n                const translationY = e.allTouches[0].y - touchStart.y;\n                const d = (this.state.isHorizontal ? translationX : translationY);\n                const od = (this.state.isHorizontal ? translationY : translationX);\n                if (Math.abs(d) >= this.state.threshold\n                    && Math.abs(od) < Math.tan((15 * Math.PI) / 180) * this.state.threshold) {\n                    touchStart.active = true;\n                }\n            })\n            .onChange(e => {\n                if (!touchStart.active) {\n                    return;\n                }\n                const bounds = (this.props.handlers?.bounds && this.props.handlers?.bounds(e)) || {};\n                const d = (this.state.isHorizontal ? e.translationX : e.translationY);\n                let phase = this.computePhase(bounds?.center || 0);\n                if (d && d < 0 && !isNil(bounds.center) && !isNil(bounds.lower)\n                    && bounds.center !== bounds.lower) {\n                    phase += (d / (bounds.center - bounds.lower)) || 0;\n                } else if (d && d > 0 && !isNil(bounds.center) && !isNil(bounds.upper)\n                    && bounds.center !== bounds.upper) {\n                    phase += (d / (bounds.upper - bounds.center)) || 0;\n                }\n                this.animationPhase.setValue(phase);\n                this.position.setValue(\n                    (this.isRTL()?-bounds?.center! :bounds?.center || 0) + d);\n            })\n            .onEnd(e => {\n                if (!touchStart.active) {\n                    return;\n                }\n                touchStart =  {\n                    x: 0,\n                    y: 0,\n                    active: false\n                };\n                this.props.handlers?.onAnimation && \n                this.props.handlers?.onAnimation(e);\n                if (e.translationX < 0) {\n                    this.isRTL()?this.goToLower(e):this.goToUpper(e);\n                } else if (e.translationX > 0) {\n                    this.isRTL()?this.goToUpper(e):this.goToLower(e);\n                }\n            })\n\n    }\n\n    computeMaxScroll() {\n        let max = Number.MAX_VALUE;\n        const childrenWidth = this.childrenLayout.reduce((s, v) => s + v.width, 0);\n        const childrenHeight = this.childrenLayout.reduce((s, v) => s + v.height, 0);\n        if (this.props.direction === 'horizontal') {\n            if (childrenWidth && this.viewLayout?.width) {\n                max = childrenWidth - this.viewLayout.width;\n            }\n        } else if (childrenHeight && this.viewLayout?.height) {\n            max = childrenHeight - this.viewLayout.height;\n        }\n        this.setState({maxPosition: -1 * max});\n    }\n\n    setChildrenLayout(event: LayoutChangeEvent, index: number) {\n      this.childrenLayout[index] = event.nativeEvent.layout;\n      this.computeMaxScroll();\n    }\n\n    setViewLayout(event: LayoutChangeEvent) {\n        this.viewLayout = event.nativeEvent.layout;\n        this.computeMaxScroll();\n    }\n\n    computePhase(value: number) {\n        return (this.props.handlers?.computePhase && \n            this.props.handlers?.computePhase(value)) || 0;\n    }\n\n    isRTL(){\n        return this.i18nService.isRTLLocale();\n    }\n\n    goToLower(e?: any) {\n        const bounds = (this.props.handlers?.bounds && this.props.handlers?.bounds(e)) || {};\n        this.setPosition(bounds.lower)\n            .then(() => {\n                if (!isNil(bounds.lower) && bounds.center !== bounds.lower) {\n                    this.props.handlers?.onLower && \n                    this.props.handlers?.onLower(e);\n                }\n            });\n    }\n\n    goToUpper(e?: any) {\n        const bounds = (this.props.handlers?.bounds && this.props.handlers?.bounds(e)) || {};\n        this.setPosition(bounds.upper)\n            .then(() => {\n                if (!isNil(bounds.upper) && bounds.center !== bounds.upper) {\n                    this.props.handlers?.onUpper && \n                    this.props.handlers?.onUpper(e);\n                }\n            });\n    }\n    \n    setPosition(value: number | undefined) {\n        if (isNil(value)) {\n            return Promise.reject();\n        }\n        let position = isNaN(this.state.maxPosition) ? value : Math.max(this.state.maxPosition, value);\n        return new Promise((resolve) => {\n            Animated.parallel([\n                Animated.timing(this.animationPhase, {\n                    useNativeDriver: true,\n                    toValue:  this.computePhase(value),\n                    duration: 200,\n                    easing: Easing.out(Easing.linear)\n                }),\n                Animated.timing(this.position, {\n                    useNativeDriver: true,\n                    toValue:  (this.isRTL() ? -1: 1) * position,\n                    duration: 200,\n                    easing: Easing.out(Easing.linear)\n                })\n            ]).start(resolve);\n        });\n    }\n\n    public render() {\n        const isHorizontal = this.props.direction === 'horizontal';\n        return (\n            //@ts-ignore\n            <GestureDetector gesture={this.gesture}>\n                <Animated.View style={[\n                    isHorizontal ? {\n                        flexDirection: 'row',\n                        flexWrap: 'nowrap',\n                        alignItems: 'center',\n                    } : null,\n                    this.props.style, \n                    {\n                        transform: this.state.isHorizontal ? [{\n                            translateX: this.position\n                        }] : [{\n                            translateY: this.position\n                        }]\n                    }]} onLayout={this.setViewLayout.bind(this)}>\n                    {this.props.children.map((c: any, i: number) => {\n                        return (<RNView onLayout={(e) => this.setChildrenLayout(e, i)} key={c.key} \n                            style={[this.props.slideMinWidth ? {\n                                minWidth: this.props.slideMinWidth\n                            } : {\n                                width: this.props.slideWidth\n                            },\n                            this.props.style?.height === '100%' ? {\n                                height: '100%'\n                            } : null\n                        ]}>\n                            {c}\n                        </RNView>);\n                    })}\n                </Animated.View>\n            </GestureDetector>\n        );\n    }\n\n}"],"mappings":"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"}