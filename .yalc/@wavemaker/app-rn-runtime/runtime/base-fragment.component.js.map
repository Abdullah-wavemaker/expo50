{"version":3,"names":["React","Text","get","filter","isNil","TestIdPrefixProvider","TextIdPrefixConsumer","injector","toBoolean","toNumber","isFullPathUrl","BaseComponent","BaseProps","BASE_THEME","ThemeProvider","VariableEvents","default","_viewPort","EVENTS","viewportEvents","WmFormField","WmForm","ToastConsumer","spinnerService","AppI18nService","WmFormAction","FragmentProps","BaseFragment","constructor","props","defaultProps","_defineProperty","createElement","text","title","okButtonText","cancelButtonText","onOk","onCancel","onClose","App","appConfig","app","formatters","Actions","Object","assign","Variables","cleanup","push","subscribe","ORIENTATION_CHANGE","$new","$old","isDetached","targetWidget","invokeEventCallback","proxy","screenWidth","width","screenHeight","height","SIZE_CHANGE","_this$theme","theme","destroy","baseUrl","url","resourceBaseUrl","onDestroy","onContentReady","onReady","refresh","onComponentChange","w","onComponentInit","id","name","formWidgets","formFields","formActions","Widgets","buttonArray","parentFormRef","pid","forEach","ff","formKey","registerFormFields","registerFormActions","formfield","formRef","fragments","onComponentDestroy","formfields","handleUrl","startsWith","getDateFormat","fmt","dateFormat","replace","getTimeFormat","timeFormat","getDateTimeFormat","dateTimeFormat","getCurrencySymbol","currencyCode","getStyle","classes","inlineStyles","arguments","length","undefined","trim","mergeStyle","resetAppLocale","appLocale","messages","values","f","eval","fn","failOnError","call","e","val","componentWillUnmount","componentDidMount","memoize","key","o","_memoize","initVariableSpinner","variables","v","actions","concat","map","BEFORE_INVOKE","show","message","spinner","AFTER_INVOKE","hide","onFragmentReady","cleanUpVariablesandActions","fragmentVariables","fragmentActions","startUpActions","a","invoke","Promise","all","startUpVariables","s","catch","error","console","then","startUpVariablesLoaded","showContent","onAttach","_this$targetWidget","watcher","isActive","unmute","refreshdataonattach","componentWillAttach","onDetach","_this$targetWidget2","mute","componentWillDetach","forceUpdate","generateTestIdPrefix","testId","getTestId","split","reduce","i","charCodeAt","render","autoUpdateVariables","value","_this$Variables$value","invokeOnParamChange","isVisible","testIdPrefix","toastService","toaster","renderWidget"],"sources":["base-fragment.component.tsx"],"sourcesContent":["import React from 'react';\nimport { Text } from 'react-native';\nimport { get, filter, isNil } from 'lodash';\n\nimport AppConfig from '@wavemaker/app-rn-runtime/core/AppConfig';\nimport { Formatter } from '@wavemaker/app-rn-runtime/core/formatters';\nimport { TestIdPrefixProvider, TextIdPrefixConsumer } from '@wavemaker/app-rn-runtime/core/testid.provider';\nimport injector from '@wavemaker/app-rn-runtime/core/injector';\nimport { toBoolean, toNumber, isFullPathUrl } from '@wavemaker/app-rn-runtime/core/utils';\nimport { BaseComponent, BaseComponentState, BaseStyles, BaseProps, LifecycleListener } from '@wavemaker/app-rn-runtime/core/base.component';\nimport BASE_THEME, { Theme, ThemeProvider } from '@wavemaker/app-rn-runtime/styles/theme';\nimport { BaseVariable, VariableEvents } from '@wavemaker/app-rn-runtime/variables/base-variable';\nimport { default as _viewPort, EVENTS as viewportEvents } from '@wavemaker/app-rn-runtime/core/viewport';\nimport App from './App';\nimport WmFormField from '@wavemaker/app-rn-runtime/components/data/form/form-field/form-field.component';\nimport WmForm from '@wavemaker/app-rn-runtime/components/data/form/form.component';\nimport { ToastConsumer, ToastService } from '@wavemaker/app-rn-runtime/core/toast.service';\nimport spinnerService from '@wavemaker/app-rn-runtime/runtime/services/app-spinner.service';\n\nimport AppI18nService from './services/app-i18n.service';\nimport { Watcher } from './watcher';\nimport WmFormAction from '@wavemaker/app-rn-runtime/components/data/form/form-action/form-action.component';\n\nexport class FragmentProps extends BaseProps {\n\n}\n\nexport interface FragmentState<T extends FragmentProps> extends BaseComponentState<T> {}\n\nexport type FragmentStyles = BaseStyles & {};\nexport default abstract class BaseFragment<P extends FragmentProps, S extends FragmentState<P>> extends BaseComponent<P, S, FragmentStyles> implements LifecycleListener {\n    public App: App;\n    public onReady: Function = () => {};\n    public baseUrl = '';\n    public resourceBaseUrl = '';\n    public targetWidget = null as unknown as BaseComponent<any, any, any>;\n    public Widgets: any = {};\n    public Variables: any = {};\n    public theme: Theme = BASE_THEME;\n    public appLocale: any = {};\n    private startUpVariables: string[] = [];\n    private startUpVariablesLoaded = false;\n    private startUpActions: string[] = [];\n    private autoUpdateVariables: string[] = [];\n    private cleanUpVariablesandActions: BaseVariable<any>[] = [];\n    public fragmentVariables: any = {};\n    public fragmentActions: any = {};\n    public Actions: any = {};\n    public appConfig = injector.get<AppConfig>('APP_CONFIG');\n    public cache = false;\n    public refreshdataonattach= true;\n    public isReactNativeApp = true;\n    public fragments: any = {};\n    public isDetached = false;\n    public _memoize = {} as any;\n    public toaster: any;\n    public formatters: Map<string, Formatter>;\n    public serviceDefinitions = {} as any;\n    public Viewport = _viewPort;\n    public loadingMessage = React.createElement(Text, [] as any, ['loading...']);\n    public showContent = false;\n    public notification = {\n                            text: '',\n                            title: '',\n                            okButtonText: '',\n                            cancelButtonText: '',\n                            onOk: () => {},\n                            onCancel: () => {},\n                            onClose: () => {}\n                          };\n    public watcher: Watcher = null as any;\n    constructor(props: P, defaultProps?: P) {\n        super(props, null as any, defaultProps);\n        this.App = this.appConfig.app;\n        this.formatters = this.App.formatters;\n        this.Actions = Object.assign({}, this.App.Actions);\n        this.Variables = Object.assign({}, this.App.Variables);\n        this.cleanup.push(_viewPort.subscribe(viewportEvents.ORIENTATION_CHANGE, ($new: any, $old: any) => {\n          !this.isDetached && this.targetWidget && this.targetWidget.invokeEventCallback('onOrientationchange', [null, this.proxy,\n            {screenWidth: _viewPort.width,\n              screenHeight: _viewPort.height}]);\n        }));\n        this.cleanup.push(_viewPort.subscribe(viewportEvents.SIZE_CHANGE, ($new: any, $old: any) => {\n          !this.isDetached && this.targetWidget && this.targetWidget.invokeEventCallback('onResize', [null, this.proxy,\n            {screenWidth: $new.width,\n              screenHeight: $new.height}]);\n        }));\n        this.cleanup.push(() => this.theme?.destroy());\n        this.baseUrl = this.appConfig.url;\n        this.resourceBaseUrl = this.appConfig.url;\n        this.cleanup.push(() => this.onDestroy());\n    }\n\n    onContentReady() {\n      this.onReady();\n      this.appConfig.refresh();\n      this.targetWidget && this.targetWidget.invokeEventCallback('onLoad', [null, this.proxy]);\n      this.onContentReady = () => {};\n    }\n\n    onComponentChange(w: BaseComponent<any, any, any>) {\n      this.refresh();\n    }\n\n    onComponentInit(w: BaseComponent<any, any, any>) {\n      const id = w.props.id || w.props.name;\n      let formWidgets: any, formFields: any, formActions: any;\n\n      if (w instanceof WmForm) {\n        if (!this.Widgets[id]) {\n          this.Widgets[id] = w;\n        }\n        if (w.props.id) {\n          const name: any = w.props.name;\n          formWidgets = this.Widgets[name].formWidgets;\n          formFields = this.Widgets[name].formFields;\n          formActions = this.Widgets[name].buttonArray;\n          this.Widgets[name].formFields = [];\n          this.Widgets[name].buttonArray = [];\n          this.Widgets[name].formWidgets = {};\n        } else {\n          formWidgets = this.Widgets[id].formWidgets;\n          formFields = this.Widgets[id].formFields;\n          formActions = this.Widgets[id].buttonArray;\n        }\n        this.Widgets[id] = w;\n        if (w.parentFormRef) {\n          let pid = w.parentFormRef.props.id || w.parentFormRef.props.name;\n          formFields.forEach((ff: any) => {\n            const formKey = ff.props.formKey || ff.props.name;\n            this.Widgets[pid].formFields.push(ff);\n            this.Widgets[pid].formWidgets[formKey] = formWidgets[ff.props.name];\n          });\n        }\n        w.registerFormFields(formFields, formWidgets);\n        w.registerFormActions(formActions);\n        return;\n      }\n      if (w.props.formfield) {\n        if (!this.Widgets[w.props.formRef]) {\n          this.Widgets[w.props.formRef] = {formFields: [], formWidgets: {}};\n        } else if (!this.Widgets[w.props.formRef].formFields) {\n          this.Widgets[w.props.formRef].formFields = [];\n        }\n        if (!this.Widgets[w.props.formRef].formWidgets) {\n          this.Widgets[w.props.formRef].formWidgets = {}\n        }\n        this.Widgets[w.props.formRef].formWidgets[w.props.name] = w;\n        return;\n      }\n      if (w instanceof WmFormAction) {\n        if (!this.Widgets[w.props.formKey]) {\n          this.Widgets[w.props.formKey] = {};\n        }\n        if (!this.Widgets[w.props.formKey].buttonArray) {\n          this.Widgets[w.props.formKey].buttonArray = [];\n        }\n        this.Widgets[w.props.formKey].buttonArray.push(w);\n        return;\n      }\n\n      if (w instanceof WmFormField) {\n        if (!this.Widgets[w.props.formRef]) {\n          this.Widgets[w.props.formRef] = {};\n        }\n        if (!this.Widgets[w.props.formRef].formFields) {\n          this.Widgets[w.props.formRef].formFields = [];\n        }\n        this.Widgets[w.props.formRef].formWidgets = this.Widgets[w.props.formRef].formWidgets || {};\n        this.Widgets[w.props.formRef].formFields.push(w);\n        return;\n      }\n      this.Widgets[id] = w;\n      if (w instanceof BaseFragment && w !== this) {\n        this.fragments[id] = w;\n      }\n    }\n\n    onComponentDestroy(w: BaseComponent<any, any, any>) {\n      const id = w.props.id || w.props.name;\n      delete this.Widgets[id];\n      if (w instanceof BaseFragment) {\n        delete this.fragments[id];\n      }\n      if (w instanceof WmForm) {\n        w.formWidgets = {};\n        w.formFields = [];\n        w.formfields = {};\n      }\n    }\n\n    handleUrl(url: string) {\n      if (isFullPathUrl(url)) {\n        return url;\n      }\n      return this.appConfig.url + (url.startsWith('/') ? '' : '/') + url;\n    }\n\n    getDateFormat(fmt?: string) {\n      // getting formats from appLocale when app locale is loaded locally.\n      return (fmt || AppI18nService.dateFormat || get(this.appConfig, 'appLocale.formats.date')).replace(/d/g, 'D').replace(/E/g, 'd').replace(/y/g, 'Y');\n    }\n\n    getTimeFormat(fmt?: string) {\n      return fmt || AppI18nService.timeFormat || get(this.appConfig, 'appLocale.formats.time');\n    }\n\n    getDateTimeFormat(fmt?: string) {\n      return (fmt || AppI18nService.dateTimeFormat || (get(this.appConfig, 'appLocale.formats.date') + ' ' + get(this.appConfig, 'appLocale.formats.time'))).replace(/d/g, 'D').replace(/E/g, 'd').replace(/y/g, 'Y');\n    }\n\n    getCurrencySymbol(fmt?: string) {\n      return (fmt || AppI18nService.currencyCode || 'USD');\n    }\n\n    getStyle(classes: string, inlineStyles:any = {}) {\n      if (classes && classes.trim().length > 0) {\n        return this.theme.mergeStyle({}, this.theme.getStyle(classes), inlineStyles);\n      }\n      return inlineStyles;\n    }\n\n    resetAppLocale() {\n      this.appLocale = this.appConfig.appLocale.messages;\n      Object.values(this.fragments).forEach((f: any) => (f as BaseFragment<any, any>).resetAppLocale());\n    }\n\n    eval(fn: Function, failOnError = false) {\n      try {\n        return fn.call(this);\n      } catch (e) {\n        if (failOnError) {\n          throw e;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    toBoolean(val: any) {\n      if (isNil(val)) {\n        return false;\n      }\n      return toBoolean(val);\n    }\n\n    toNumber(val: any) {\n      if (isNil(val)) {\n        return val;\n      }\n      return toNumber(val);\n    }\n\n    componentWillUnmount() {\n      super.componentWillUnmount();\n      this.targetWidget && this.targetWidget.invokeEventCallback('onDestroy', [null, this.proxy]);\n    }\n\n    componentDidMount(): void {\n      this.resetAppLocale();\n      super.componentDidMount();\n    }\n\n    memoize(key: string, o: any) {\n      if (!this._memoize[key])  {\n        this._memoize[key] = o;\n      }\n      return this._memoize[key];\n    }\n\n    initVariableSpinner() {\n      let variables = filter(this.Variables, (v: BaseVariable<any>) => !!get(v, 'config.spinnerContext'));\n      const actions = filter(this.Actions, (v: BaseVariable<any>) => !!get(v, 'config.spinnerContext'));\n      variables = variables.concat(actions);\n      if (!variables.length) {\n        return;\n      }\n      this.cleanup.push(...variables.map(v => {\n          return ((v as BaseVariable<any>)\n            .subscribe(VariableEvents.BEFORE_INVOKE, () => {\n              spinnerService.show({\n                message: get(v, 'config.spinnerMessage'),\n                spinner: this.App.appConfig.spinner\n              });\n            }))\n      }));\n      this.cleanup.push(...variables.map(v => {\n        return ((v as BaseVariable<any>)\n          .subscribe(VariableEvents.AFTER_INVOKE, () => {\n            spinnerService.hide();\n          }));\n      }));\n    }\n\n    onFragmentReady() {\n      this.cleanup.push(...Object.values({...this.Variables, ...this.Actions}).map(v => {\n        return ((v as BaseVariable<any>)\n          .subscribe(VariableEvents.AFTER_INVOKE, () => this.App.refresh()));\n      }));\n      this.initVariableSpinner();\n      this.cleanUpVariablesandActions.push(...Object.values({...this.fragmentVariables, ...this.fragmentActions} as BaseVariable<any>));\n      this.startUpActions.map(a => this.Actions[a] && this.Actions[a].invoke());\n      return Promise.all(this.startUpVariables.map(s => this.Variables[s] && this.Variables[s].invoke()))\n      .catch((error) => {\n        // catch errors and show content\n        console.error(error);\n      })\n      .then(() => {\n        this.startUpVariablesLoaded = true;\n        this.showContent = true;\n        this.appConfig.refresh();\n      });\n    }\n\n    onAttach() {\n      this.isDetached = false;\n      this.watcher.isActive = true;\n      this.resetAppLocale();\n      Object.values(this.fragments).forEach((f: any) => f.onAttach());\n      this.cleanUpVariablesandActions.forEach((v: any) => v.unmute && v.unmute());\n      this.targetWidget?.invokeEventCallback('onAttach', [null, this.proxy]);\n      if (this.refreshdataonattach) {\n        Promise.all(this.startUpVariables.map(s => this.Variables[s] && this.Variables[s].invoke()));\n      }\n      Object.values(this.Widgets).forEach((w: any) => {\n        w.componentWillAttach && w.componentWillAttach();\n      });\n    }\n\n    onDetach() {\n      this.isDetached = true;\n      this.watcher.isActive = false;\n      Object.values(this.fragments).forEach((f: any) => f.onDetach());\n      this.cleanUpVariablesandActions.forEach((v: any) => v.mute && v.mute());\n      this.targetWidget?.invokeEventCallback('onDetach', [null, this.proxy]);\n      Object.values(this.Widgets).forEach((w: any) => {\n        w.componentWillDetach && w.componentWillDetach();\n      });\n    }\n\n    onDestroy() {\n      this.cleanUpVariablesandActions.forEach((v: any) => v.destroy());\n      this.watcher.destroy();\n    }\n\n    refresh() {\n      (injector.get('AppConfig') as AppConfig).refresh();\n    }\n\n    forceUpdate() {\n      super.forceUpdate();\n      Object.values(this.fragments).forEach((f: any) => (f as BaseFragment<any, any>).forceUpdate());\n    }\n\n    generateTestIdPrefix() {\n      const testId = this.getTestId();\n      return testId && (testId.split('')\n        .reduce((a, v, i) => a + (v.charCodeAt(0)  * (i + 1)), 0) + '');\n    }\n\n    render() {\n      if (this.startUpVariablesLoaded) {\n        this.autoUpdateVariables\n          .forEach(value => this.Variables[value]?.invokeOnParamChange());\n      }\n      return this.isVisible() ? (\n      <ThemeProvider value={this.theme}>\n        <TextIdPrefixConsumer>\n            {(testIdPrefix) => {\n              this.testIdPrefix = testIdPrefix || '';\n              return (\n              <TestIdPrefixProvider value={this.generateTestIdPrefix() || ''}>\n                <ToastConsumer>\n                {(toastService: ToastService) => {\n                  this.toaster = toastService;\n                  return this.renderWidget(this.props);\n                }}\n              </ToastConsumer>\n              </TestIdPrefixProvider>);\n            }}\n        </TextIdPrefixConsumer>\n\n      </ThemeProvider>) : null;\n    }\n}\n\n\n"],"mappings":"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"}