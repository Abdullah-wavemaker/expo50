{"version":3,"names":["WmPartial","BaseFragment","BasePartial","constructor","props","_defineProperty","isPartOfPrefab","prefab","App","appConfig","app","Actions","Object","assign","Variables","serviceDefinitions","Prefab","baseUrl","watcher","parentWatcher","create","onFragmentReady","then","onContentReady","parent","Widgets","fragmentVariables","invokeEventCallback","prefabname","_this$Prefab","onComponentInit","w","targetWidget","onComponentDestroy","renderWidget","renderPartial"],"sources":["base-partial.component.tsx"],"sourcesContent":["import { BaseComponent } from '@wavemaker/app-rn-runtime/core/base.component';\nimport WmPartial from '@wavemaker/app-rn-runtime/components/page/partial/partial.component';\nimport BaseFragment, { FragmentProps, FragmentState } from './base-fragment.component';\nimport { ReactNode } from 'react';\nimport BasePrefab from './base-prefab.component';\nimport { Watcher } from './watcher';\nexport interface PartialProps extends FragmentProps {\n  serviceDefinitions: any;\n  prefab: any;\n  parent: any;\n  onLoad?: Function;\n  parentWatcher: Watcher;\n}\n\nexport interface PartialState extends FragmentState<PartialProps> {}\n\nexport default abstract class BasePartial extends BaseFragment<PartialProps, PartialState> {\n    private partialParams: any = {};\n    Prefab: BasePrefab = null as any;\n\n    constructor(props: PartialProps) {\n        super(props);\n        const isPartOfPrefab = !!this.props.prefab;\n        this.App = this.appConfig.app;\n        this.Actions = Object.assign({}, isPartOfPrefab ? {} : this.App.Actions);\n        this.Variables = Object.assign({}, isPartOfPrefab ? {} : this.App.Variables);\n        this.serviceDefinitions = this.props.serviceDefinitions;\n        if (isPartOfPrefab) {\n          this.Prefab = this.props.prefab;\n          this.baseUrl =this.Prefab.baseUrl;\n        }\n        this.watcher = props.parentWatcher.create();\n    }\n\n    onFragmentReady() {\n      return super.onFragmentReady().then(() => {\n        this.onContentReady();\n        const parent: any = this.props.parent;\n        if (parent) {\n          parent.Widgets = this.Widgets;\n          parent.Variables = this.fragmentVariables;\n        }\n        this.invokeEventCallback('onLoad', [this]);\n      });\n    }\n\n    get prefabname() {\n      return this.Prefab?.props.prefabname;\n    }\n\n    onComponentInit(w: BaseComponent<any, any, any>) {\n      super.onComponentInit(w);\n      if (w instanceof WmPartial) {\n        this.targetWidget = w;\n      }\n    }\n\n    onComponentDestroy(w: BaseComponent<any, any, any>): void {\n      super.onComponentDestroy(w);\n      const parent: any = this.props.parent;\n      if (parent) {\n        delete (parent as any).Widgets;\n        delete (parent as any).Variables;\n      }\n    }\n\n    abstract renderPartial(): ReactNode;\n\n    renderWidget(props: PartialProps) {\n      return this.renderPartial();\n    }\n}\n"],"mappings":";;;AACA,OAAOA,SAAS,MAAM,qEAAqE;AAC3F,OAAOC,YAAY,MAAwC,2BAA2B;AActF,eAAe,MAAeC,WAAW,SAASD,YAAY,CAA6B;EAIvFE,WAAWA,CAACC,KAAmB,EAAE;IAC7B,KAAK,CAACA,KAAK,CAAC;IAACC,eAAA,wBAJY,CAAC,CAAC;IAAAA,eAAA,iBACV,IAAI;IAIrB,MAAMC,cAAc,GAAG,CAAC,CAAC,IAAI,CAACF,KAAK,CAACG,MAAM;IAC1C,IAAI,CAACC,GAAG,GAAG,IAAI,CAACC,SAAS,CAACC,GAAG;IAC7B,IAAI,CAACC,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEP,cAAc,GAAG,CAAC,CAAC,GAAG,IAAI,CAACE,GAAG,CAACG,OAAO,CAAC;IACxE,IAAI,CAACG,SAAS,GAAGF,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEP,cAAc,GAAG,CAAC,CAAC,GAAG,IAAI,CAACE,GAAG,CAACM,SAAS,CAAC;IAC5E,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACX,KAAK,CAACW,kBAAkB;IACvD,IAAIT,cAAc,EAAE;MAClB,IAAI,CAACU,MAAM,GAAG,IAAI,CAACZ,KAAK,CAACG,MAAM;MAC/B,IAAI,CAACU,OAAO,GAAE,IAAI,CAACD,MAAM,CAACC,OAAO;IACnC;IACA,IAAI,CAACC,OAAO,GAAGd,KAAK,CAACe,aAAa,CAACC,MAAM,CAAC,CAAC;EAC/C;EAEAC,eAAeA,CAAA,EAAG;IAChB,OAAO,KAAK,CAACA,eAAe,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;MACxC,IAAI,CAACC,cAAc,CAAC,CAAC;MACrB,MAAMC,MAAW,GAAG,IAAI,CAACpB,KAAK,CAACoB,MAAM;MACrC,IAAIA,MAAM,EAAE;QACVA,MAAM,CAACC,OAAO,GAAG,IAAI,CAACA,OAAO;QAC7BD,MAAM,CAACV,SAAS,GAAG,IAAI,CAACY,iBAAiB;MAC3C;MACA,IAAI,CAACC,mBAAmB,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC,CAAC;EACJ;EAEA,IAAIC,UAAUA,CAAA,EAAG;IAAA,IAAAC,YAAA;IACf,QAAAA,YAAA,GAAO,IAAI,CAACb,MAAM,cAAAa,YAAA,uBAAXA,YAAA,CAAazB,KAAK,CAACwB,UAAU;EACtC;EAEAE,eAAeA,CAACC,CAA+B,EAAE;IAC/C,KAAK,CAACD,eAAe,CAACC,CAAC,CAAC;IACxB,IAAIA,CAAC,YAAY/B,SAAS,EAAE;MAC1B,IAAI,CAACgC,YAAY,GAAGD,CAAC;IACvB;EACF;EAEAE,kBAAkBA,CAACF,CAA+B,EAAQ;IACxD,KAAK,CAACE,kBAAkB,CAACF,CAAC,CAAC;IAC3B,MAAMP,MAAW,GAAG,IAAI,CAACpB,KAAK,CAACoB,MAAM;IACrC,IAAIA,MAAM,EAAE;MACV,OAAQA,MAAM,CAASC,OAAO;MAC9B,OAAQD,MAAM,CAASV,SAAS;IAClC;EACF;EAIAoB,YAAYA,CAAC9B,KAAmB,EAAE;IAChC,OAAO,IAAI,CAAC+B,aAAa,CAAC,CAAC;EAC7B;AACJ"}