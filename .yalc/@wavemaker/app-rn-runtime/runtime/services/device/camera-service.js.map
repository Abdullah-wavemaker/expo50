{"version":3,"names":["React","ImageBackground","Platform","TouchableOpacity","View","Ionicons","ResizeMode","Video","Camera","CameraType","FileSystem","permissionManager","appDisplayManagerService","styles","preview","top","left","right","flexGrow","backgroundColor","actionBtn","flex","padding","paddingHorizontal","alignSelf","margin","actionBar","flexDirection","justifyContent","position","bottom","leftWrapper","alignItems","midWrapper","rightWrapper","circle","display","outerCircle","borderWidth","height","width","borderRadius","borderColor","innerCircle","CameraService","constructor","displayManager","_defineProperty","back","captureVideo","options","Promise","resolve","reject","requestPermissions","then","destroy","show","content","createElement","CameraView","testID","type","captureType","onSuccess","o","call","videoPath","uri","onCancel","captureImage","params","catch","base64","imagePath","CameraViewProps","CameraViewState","Component","props","camera","recordAsync","response","readAsStringAsync","encoding","setState","cameraContent","isCaptured","state","showActionBtns","recording","stopRecording","toggleCapture","takePicture","startRecord","stopRecord","getTestProps","suffix","id","OS","accessibilityLabel","accessible","quality","skipProcessing","onPictureSaved","takePictureAsync","getActionsTemplate","style","_extends","onPress","closeView","name","size","color","bind","cameraType","getPreviewTemplate","actions","source","resizeMode","CONTAIN","shouldPlay","useNativeControls","isLooping","render","ref","onCameraReady","cameraService"],"sources":["camera-service.tsx"],"sourcesContent":["import React from \"react\";\nimport { ImageBackground, Platform, TouchableOpacity, View, ViewStyle } from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { ResizeMode, Video } from \"expo-av\";\nimport { Camera, CameraType } from \"expo-camera\";\nimport * as FileSystem from \"expo-file-system\";\nimport * as Application from 'expo-application';\n\nimport { DisplayManager } from \"@wavemaker/app-rn-runtime/core/display.manager\";\nimport { CaptureVideoOutput } from \"@wavemaker/app-rn-runtime/variables/device/camera/capture-video.operation\";\nimport { CaptureImageOutput } from \"@wavemaker/app-rn-runtime/variables/device/camera/capture-image.operation\";\nimport permissionManager from '@wavemaker/app-rn-runtime/runtime/services/device/permissions';\nimport { CameraInput } from \"@wavemaker/app-rn-runtime/core/device/camera-service\";\nimport { Input } from \"@wavemaker/app-rn-runtime/variables/device/operation.provider\";\nimport appDisplayManagerService from \"@wavemaker/app-rn-runtime/runtime/services/app-display-manager.service\";\nconst styles = {\n  preview: {\n    top: 0,\n    left: 0,\n    right: 0,\n    flexGrow: 1,\n    backgroundColor: 'black'\n  },\n  actionBtn: {\n    flex: 0,\n    padding: 15,\n    paddingHorizontal: 20,\n    alignSelf: 'center',\n    margin: 20,\n  } as ViewStyle,\n  actionBar: {\n    flex: 0,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    padding: 20\n  } as ViewStyle,\n  leftWrapper: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'flex-start',\n  } as ViewStyle,\n  midWrapper: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  } as ViewStyle,\n  rightWrapper: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'flex-end',\n  } as ViewStyle,\n  circle: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  } as ViewStyle,\n  outerCircle: {\n    borderWidth: 3,\n    height: 50,\n    width: 50,\n    borderRadius: 25,\n    borderColor: 'white'\n  },\n  innerCircle: {\n    borderRadius:2,\n    height: 20,\n    width:20,\n    backgroundColor: 'red'\n  }\n};\n\nexport interface CameraVideoInput extends Input {}\n\nexport class CameraService {\n  private type= CameraType.back;\n\n  constructor(private displayManager: DisplayManager) {\n  }\n\n  public captureVideo(options?: CameraVideoInput): Promise<CaptureVideoOutput> {\n    return new Promise((resolve, reject) => {\n      permissionManager.requestPermissions('video').then(() => {\n        const destroy = this.displayManager.show({\n          content: (<CameraView testID={\"camera_view\"} type={this.type} captureType={'video'} onSuccess={(o) => {\n            destroy.call(this.displayManager);\n            /*o.content().catch(() => {}).then(base64 => {\n              resolve({videoPath: o.uri, content: base64 || ''});\n            });*/\n            resolve({videoPath: o.uri, content: ''});\n          }}\n          onCancel={() => {\n            destroy.call(this.displayManager);\n          }}\n          ></CameraView>)\n        });\n      }, reject);\n    });\n  }\n\n  public captureImage(params: CameraInput): Promise<CaptureImageOutput> {\n    return new Promise((resolve, reject) => {\n      permissionManager.requestPermissions('image').then(() => {\n        const destroy = this.displayManager.show({\n          content: (<CameraView testID={\"camera_view\"} type={this.type} captureType={'image'} onSuccess={(o) => {\n            destroy.call(this.displayManager);\n            o.content().catch(() => {}).then(base64 => {\n              resolve({imagePath: o.uri, content: base64 || ''});\n            });\n          }} onCancel={() => {destroy.call(this.displayManager);}}\n          ></CameraView>)\n        });\n      }, reject);\n    });\n  }\n}\n\ninterface CameraOutput {\n  uri: string;\n  content: () => Promise<string>;\n}\n\nclass CameraViewProps {\n  testID: string = 'camera_view';\n  type: 'front' | 'back' = 'back' as CameraType;\n  captureType: 'image' | 'video' = 'image';\n  onSuccess: (o: CameraOutput) => any = () => {};\n  onCancel: () => any = () => {};\n}\n\nclass CameraViewState {\n    recording: boolean = false;\n    showActionBtns: boolean = false;\n    cameraType: CameraType = CameraType.back;\n    isCaptured: boolean = false;\n    closeView: boolean = false;\n    cameraContent: CameraOutput = {} as CameraOutput;\n}\n\nexport class CameraView extends React.Component<CameraViewProps, CameraViewState> {\n  private camera: Camera = {} as Camera;\n\n  constructor(props: CameraViewProps) {\n    super(props);\n    this.state = new CameraViewState();\n  }\n\n  toggleCapture() {\n    if (this.props.captureType === 'image') {\n      this.takePicture();\n    } else {\n      if (!this.state.recording) {\n        this.startRecord();\n      } else {\n        this.stopRecord();\n        this.setState({showActionBtns: true} as CameraViewState);\n      }\n    }\n  }\n\n  getTestProps(suffix: string) {\n    const id = this.props.testID + (suffix ? '_' + suffix  : '');\n    if (Platform.OS === 'android' || Platform.OS === 'web') {\n      return {\n          accessibilityLabel: id,\n          testID: id\n      };\n    }\n    return {\n        accessible: false,\n        testID: id\n    };\n  }\n\n  async takePicture() {\n    const options = {\n      quality: 0.5,\n      base64: false,\n      skipProcessing: true,\n      onPictureSaved: (response: any) => {\n        response.content = async () => {\n          return await FileSystem.readAsStringAsync(response.uri, { encoding: 'base64' });\n        };\n        this.setState({ \n          cameraContent: response,\n          isCaptured: true,\n          showActionBtns: true } as CameraViewState);\n      }\n    }\n    await this.camera.takePictureAsync(options);\n\n    if (this.state.showActionBtns) {\n      this.setState({showActionBtns: false} as CameraViewState);\n    }\n    this.setState({showActionBtns: true} as CameraViewState);\n  }\n\n  // start recording\n  startRecord = async () => {\n    this.camera.recordAsync().then((response: any) => {\n      response.content = async () => {\n        return await FileSystem.readAsStringAsync(response.uri, { encoding: 'base64' });\n      };\n      this.setState({ cameraContent: response, isCaptured: true } as CameraViewState);\n    });\n    if (this.state.showActionBtns) {\n      this.setState({showActionBtns: false} as CameraViewState);\n    }\n\n    this.setState({recording: true} as CameraViewState);\n  };\n\n  // stop recording\n  stopRecord = async () => {\n    this.camera.stopRecording();\n    this.setState({recording: false} as CameraViewState);\n    this.setState({showActionBtns: true} as CameraViewState);\n  };\n\n  getActionsTemplate() {\n    return <View style={styles.actionBar}>\n      <View style={styles.leftWrapper}>\n        <TouchableOpacity\n          {...this.getTestProps('close')}\n          onPress={() => {\n            this.setState({ cameraContent: {uri: ''}, isCaptured: false,  closeView: true } as CameraViewState);\n            this.props.onCancel();\n          }}>\n          <Ionicons name='close-circle' size={32} color='white' />\n        </TouchableOpacity>\n      </View>\n      <View style={styles.midWrapper}>\n        {!this.state.isCaptured ? <TouchableOpacity style={[styles.circle, styles.outerCircle, this.props.captureType === 'video' && !this.state.recording ? { backgroundColor: \"red\" } : {},\n          this.props.captureType === 'image' ? { backgroundColor: \"white\" } : {}]}\n                          onPress={this.toggleCapture.bind(this)}\n                          {...this.getTestProps('capture')}>\n          <View style={[styles.circle as ViewStyle, this.props.captureType === 'image' ? {} : styles.innerCircle, this.props.captureType === 'image' ? { backgroundColor: \"white\" } : {}]}></View>\n        </TouchableOpacity> : null}\n      </View>\n      <View style={styles.rightWrapper}>\n        {this.state.showActionBtns ? (<TouchableOpacity\n          onPress={() => {\n            this.setState({ isCaptured: false, closeView: true } as CameraViewState);\n            this.props.onSuccess(this.state.cameraContent);\n            this.setState({ cameraContent: {uri: ''} } as CameraViewState);\n          }}\n          {...this.getTestProps('ok')}>\n          <Ionicons name='checkmark-circle' size={32} color='white'/>\n        </TouchableOpacity>) : (<TouchableOpacity\n          {...this.getTestProps('toggle')}\n          onPress={() => {\n            this.setState({cameraType: this.state.cameraType === 'back' ? 'front' : 'back'} as CameraViewState);\n          }}>\n          <Ionicons name='camera-reverse' size={32} color='white' />\n        </TouchableOpacity>)}\n      </View>\n    </View>\n  }\n\n  getPreviewTemplate(actions: any) {\n    return this.props.captureType === 'image' ?\n      <ImageBackground source={{uri : this.state.cameraContent.uri}} resizeMode={ResizeMode.CONTAIN} style={{flex: 1}} />\n      : <Video\n          style={{ flex: 1 }}\n          source={{\n            uri: this.state.cameraContent.uri,\n          }}\n          shouldPlay={true}\n          useNativeControls\n          isLooping\n          resizeMode={ResizeMode.CONTAIN}\n        ></Video>\n  }\n\n  render() {\n    if (this.state.closeView) {\n      return null;\n    }\n    const actions = this.getActionsTemplate();\n    return (\n      <View style={styles.preview}>\n        {this.state.isCaptured ? (\n          this.getPreviewTemplate(actions)\n        ) : (\n          <Camera type={CameraType[this.state.cameraType]} ref={(ref: Camera) => { this.camera = ref; }}\n              style={{flex: 1}}\n              onCameraReady={() => {}}>\n\n          </Camera>)}\n        {actions}\n      </View>)\n  }\n}\nconst cameraService = new CameraService(appDisplayManagerService);\nexport default cameraService;\n"],"mappings":"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"}