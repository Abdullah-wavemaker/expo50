{"version":3,"names":["BackHandler","injector","AppDisplayManagerService","constructor","_defineProperty","displayOptions","content","destroy","clearBackButtonPress","removeEventListener","handleBackButtonPress","setBackButtonPress","addEventListener","show","options","refresh","displayContent","get","onDestroy","appDisplayManagerService"],"sources":["app-display-manager.service.tsx"],"sourcesContent":["import { BackHandler } from \"react-native\";\n\nimport {DisplayManager, DisplayOptions} from \"@wavemaker/app-rn-runtime/core/display.manager\";\nimport AppConfig from \"@wavemaker/app-rn-runtime/core/AppConfig\";\nimport injector from \"@wavemaker/app-rn-runtime/core/injector\";\n\nexport class AppDisplayManagerService implements DisplayManager {\n  public displayOptions = {} as DisplayOptions;\n\n  private clearBackButtonPress() {\n    BackHandler.removeEventListener('hardwareBackPress', this.handleBackButtonPress);\n  }\n\n  private setBackButtonPress() {\n    this.clearBackButtonPress();\n    if (this.displayOptions.content) {\n      BackHandler.addEventListener('hardwareBackPress', this.handleBackButtonPress);\n    }\n  }\n\n  private handleBackButtonPress = () => {\n    if (this.displayOptions.content) {\n      this.destroy();\n      return true;\n    }\n    return false;\n  }\n\n  show(options: DisplayOptions) {\n    this.displayOptions = options;\n    this.refresh();\n    this.setBackButtonPress();\n    return this.destroy;\n  }\n\n  displayContent(content: React.ReactNode) {\n    this.displayOptions.content = content;\n  }\n\n  refresh() {\n    (injector.get('AppConfig') as AppConfig).refresh();\n  }\n\n  destroy() {\n    this.clearBackButtonPress();\n    this.displayOptions.onDestroy && this.displayOptions.onDestroy();\n    this.displayOptions = {} as DisplayOptions;\n    this.refresh();\n  }\n}\n\nconst appDisplayManagerService = new AppDisplayManagerService();\n\nexport default appDisplayManagerService;\n"],"mappings":";;;AAAA,SAASA,WAAW,QAAQ,cAAc;AAI1C,OAAOC,QAAQ,MAAM,yCAAyC;AAE9D,OAAO,MAAMC,wBAAwB,CAA2B;EAAAC,YAAA;IAAAC,eAAA,yBACtC,CAAC,CAAC;IAAAA,eAAA,gCAaM,MAAM;MACpC,IAAI,IAAI,CAACC,cAAc,CAACC,OAAO,EAAE;QAC/B,IAAI,CAACC,OAAO,CAAC,CAAC;QACd,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC;EAAA;EAjBOC,oBAAoBA,CAAA,EAAG;IAC7BR,WAAW,CAACS,mBAAmB,CAAC,mBAAmB,EAAE,IAAI,CAACC,qBAAqB,CAAC;EAClF;EAEQC,kBAAkBA,CAAA,EAAG;IAC3B,IAAI,CAACH,oBAAoB,CAAC,CAAC;IAC3B,IAAI,IAAI,CAACH,cAAc,CAACC,OAAO,EAAE;MAC/BN,WAAW,CAACY,gBAAgB,CAAC,mBAAmB,EAAE,IAAI,CAACF,qBAAqB,CAAC;IAC/E;EACF;EAUAG,IAAIA,CAACC,OAAuB,EAAE;IAC5B,IAAI,CAACT,cAAc,GAAGS,OAAO;IAC7B,IAAI,CAACC,OAAO,CAAC,CAAC;IACd,IAAI,CAACJ,kBAAkB,CAAC,CAAC;IACzB,OAAO,IAAI,CAACJ,OAAO;EACrB;EAEAS,cAAcA,CAACV,OAAwB,EAAE;IACvC,IAAI,CAACD,cAAc,CAACC,OAAO,GAAGA,OAAO;EACvC;EAEAS,OAAOA,CAAA,EAAG;IACPd,QAAQ,CAACgB,GAAG,CAAC,WAAW,CAAC,CAAeF,OAAO,CAAC,CAAC;EACpD;EAEAR,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACH,cAAc,CAACa,SAAS,IAAI,IAAI,CAACb,cAAc,CAACa,SAAS,CAAC,CAAC;IAChE,IAAI,CAACb,cAAc,GAAG,CAAC,CAAmB;IAC1C,IAAI,CAACU,OAAO,CAAC,CAAC;EAChB;AACF;AAEA,MAAMI,wBAAwB,GAAG,IAAIjB,wBAAwB,CAAC,CAAC;AAE/D,eAAeiB,wBAAwB"}